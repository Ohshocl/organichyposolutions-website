<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- BRAND-FOCUSED TITLE: Targets your exact search terms -->
    <title>Shopping Cart | OHSHOCL | Organic Hypo Solutions | Utah Organic Sanitization Products</title>
    
    <!-- CLEAN META DESCRIPTION: Natural brand messaging -->
    <meta name="description" content="Complete your order of premium USDA Certified Organic and EPA registered hypochlorous acid products. Professional disinfectant supplies and organic cleaning solutions from Utah's trusted sanitization company.">

    <!-- BRAND KEYWORDS: SEO optimization -->
    <meta name="keywords" content="organic cleaning product cart, professional disinfectant ordering, bulk sanitizer purchasing, subscription cleaning products, Utah cleaning supply order, commercial product checkout, disinfectant bulk pricing, professional sanitizer cart, organic product ordering, cleaning supply purchasing">

    <!-- STANDARD SEO -->
    <meta name="author" content="OHSHOCL - Organic Hypo Solutions">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    
    <!-- CANONICAL URL -->
    <link rel="canonical" href="https://organichyposolutions.com/shop/cart.html">

    <!-- LOCATION TARGETING -->
    <meta name="geo.region" content="US-UT">
    <meta name="geo.placename" content="Utah">
    <meta name="geo.position" content="40.7608;-111.8910">
    <meta name="ICBM" content="40.7608, -111.8910">

    <!-- BUSINESS INFO -->
    <meta name="business.phone" content="+1-801-712-5663">
    <meta name="business.email" content="ohshocl@gmail.com">
    <meta name="business.hours" content="Mo-Fr 08:00-18:00, Sa 09:00-17:00">

    <!-- SOCIAL SHARING -->
    <meta property="og:title" content="Shopping Cart | OHSHOCL | Utah Organic Sanitization Products">
    <meta property="og:description" content="Complete your order of premium USDA Certified Organic and EPA registered disinfectant products for professional and residential use.">
    <meta property="og:url" content="https://organichyposolutions.com/shop/cart.html">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://organichyposolutions.com/images/ohs-cart-social.jpg">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="OHSHOCL">

    <!-- TWITTER CARDS -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Shopping Cart | OHSHOCL | Utah Organic Sanitization Products">
    <meta name="twitter:description" content="Professional hypochlorous acid products. USDA Certified Organic and EPA registered for commercial and residential use.">
    <meta name="twitter:image" content="https://organichyposolutions.com/images/ohs-cart-social.jpg">

    <!-- Favicon -->
    <link rel="icon" href="../assets/images/logos/ohs-favicon.ico">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/global-styles.css">
    <link rel="stylesheet" href="../assets/css/components.css">
    <link rel="stylesheet" href="../assets/css/pages.css">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HEKE217WEY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-HEKE217WEY');
    </script>

    <style>
        :root {
            --ohs-primary-blue: #2E5EAA;
            --ohs-accent-blue: #7DD3FC;
            --ohs-organic-green: #4ADE80;
            --ohs-dark-green: #22C55E;
            --ohs-premium-gold: #f59e0b;
            --ohs-light-gray: #f8f9fa;
            --ohs-dark-gray: #6c757d;
        }

        /* Cart-specific styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--ohs-light-gray);
        }

        /* STABLE HERO SECTION */
        .hero-section {
            background: linear-gradient(135deg, var(--ohs-primary-blue) 0%, var(--ohs-accent-blue) 100%);
            color: white;
            padding: 40px 0;
            position: relative;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .cert-badge {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            margin: 0.2rem;
            display: inline-block;
        }

        /* Cart Container */
        .cart-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: 2rem;
            margin-bottom: 2rem;
            position: relative;
            z-index: 10;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        /* CART ITEMS */
        .cart-item {
            border-bottom: 2px solid #f1f5f9;
            padding: 1.5rem;
            transition: all 0.3s ease;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            background: white !important;
            border-radius: 12px;
            margin-bottom: 1rem;
            border: 1px solid #e2e8f0;
            overflow: hidden;
        }

        .cart-item:hover {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9) !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .product-image {
            width: 90px;
            height: 90px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 3px solid white;
        }

        .product-image.organic {
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }

        .product-image.premium {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        /* QUANTITY CONTROLS */
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            background: #f8fafc;
            padding: 0.8rem;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
            justify-content: center;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border: 2px solid var(--ohs-organic-green);
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--ohs-organic-green);
            font-weight: bold;
            user-select: none;
        }

        .quantity-btn:hover:not(:disabled) {
            background: var(--ohs-organic-green);
            color: white;
            transform: scale(1.05);
        }

        .quantity-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #ccc;
            color: #ccc;
        }

        .quantity-input {
            border: 2px solid var(--ohs-organic-green);
            background: white;
            border-radius: 8px;
            width: 60px;
            height: 40px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--ohs-primary-blue);
            outline: none;
            transition: all 0.3s ease;
        }

        .quantity-input:focus {
            border-color: var(--ohs-primary-blue);
            box-shadow: 0 0 8px rgba(46, 94, 170, 0.3);
        }

        /* WHOLESALE BADGES */
        .wholesale-threshold-badge {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            display: inline-block;
            margin: 0.25rem 0;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .wholesale-achieved-badge {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            display: inline-block;
            margin: 0.25rem 0;
            box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
            animation: pulse-green 2s infinite;
        }

        @keyframes pulse-green {
            0%, 100% { transform: scale(1); box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3); }
            50% { transform: scale(1.02); box-shadow: 0 4px 12px rgba(34, 197, 94, 0.5); }
        }

        /* STICKY ORDER SUMMARY */
        .sticky-order-summary {
            position: sticky;
            top: 120px;
            background: linear-gradient(135deg, var(--ohs-primary-blue) 0%, #1e3a8a 100%);
            color: white;
            padding: 2rem;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            z-index: 1001;
            border-radius: 15px;
            margin: 2rem 0;
            backdrop-filter: blur(10px);
            border: 4px solid var(--ohs-organic-green);
        }

        .order-summary-content {
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 2rem;
            align-items: center;
        }

        .order-icon {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            backdrop-filter: blur(10px);
        }

        .order-details {
            display: flex;
            gap: 3rem;
            align-items: center;
        }

        .order-detail-item {
            text-align: center;
        }

        .order-detail-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.25rem;
        }

        .order-detail-label {
            font-size: 0.8rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .checkout-cta {
            background: linear-gradient(135deg, var(--ohs-organic-green), var(--ohs-dark-green));
            border: none;
            border-radius: 15px;
            padding: 0.75rem 2rem;
            box-shadow: 0 6px 20px rgba(74, 222, 128, 0.4);
            transition: all 0.3s ease;
            min-width: 180px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .checkout-cta:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74, 222, 128, 0.6);
            background: linear-gradient(135deg, var(--ohs-dark-green), #16a34a);
        }

        .checkout-cta:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Pricing Display */
        .price-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--ohs-organic-green);
        }

        .original-price {
            text-decoration: line-through;
            color: #9ca3af;
            font-size: 0.9rem;
            margin-left: 0.5rem;
        }

        .discount-amount {
            color: #22c55e;
            font-weight: bold;
            font-size: 0.85rem;
        }

        /* Empty Cart */
        .empty-cart {
            text-align: center;
            padding: 4rem 2rem;
            color: #64748b;
            background: linear-gradient(135deg, #f8fafc, #ffffff);
            border-radius: 15px;
            margin: 2rem 0;
        }

        .empty-cart i {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        /* Badge styles */
        .badge-organic {
            background: linear-gradient(135deg, var(--ohs-organic-green), var(--ohs-dark-green));
            color: white;
        }

        .badge-premium {
            background: linear-gradient(135deg, var(--ohs-premium-gold), #d97706);
            color: white;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .hero-section {
                padding: 30px 0;
            }
            
            .cart-container {
                margin: 1rem;
                margin-top: 1rem;
            }
            
            .quantity-controls {
                gap: 0.5rem;
                padding: 0.5rem;
            }

            .quantity-btn {
                width: 35px;
                height: 35px;
            }

            .order-summary-content {
                grid-template-columns: auto 1fr;
                gap: 1rem;
                text-align: center;
            }

            .order-details {
                gap: 1.5rem;
                justify-content: center;
            }

            .order-detail-value {
                font-size: 1.2rem;
            }

            .checkout-cta {
                min-width: auto;
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }

            .sticky-order-summary {
                top: 100px;
                margin: 1rem;
                padding: 1rem;
            }
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Loading states */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .spinner {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Green Promotional Banner -->
    <div class="promo-banner text-center" id="promoBanner">
        <div class="container">
            <div class="d-flex justify-content-center align-items-center">
                <div class="text-center">
                    <span class="promo-text">
                        💰 <strong>BULK DISCOUNTS AS HIGH AS 42%</strong> available
                    </span>
                </div>
                <button class="promo-close ms-3" onclick="closeBanner()" aria-label="Close banner">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="../index.html">
                <svg width="32" height="32" viewBox="0 0 400 250" class="me-2">
                    <rect width="400" height="250" fill="#2E5EAA"/>
                    <text x="200" y="180" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="100" font-weight="bold">OHS</text>
                    <text x="200" y="210" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="20">Organic HypoSolutions</text>
                    <path d="M 320 80 Q 340 60 360 80 Q 340 100 320 80" fill="#4ADE80"/>
                    <path d="M 330 70 Q 350 50 370 70 Q 350 90 330 70" fill="#22C55E"/>
                </svg>
                Organic HypoSolutions
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">
                            <i class="fas fa-home me-1"></i>Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../services.html">
                            <i class="fas fa-spray-can me-1"></i>Services
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../products.html">
                            <i class="fas fa-shopping-bag me-1"></i>Products
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../calculator.html">
                            <i class="fas fa-calculator me-1"></i>Calculator
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="../about.html" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-info-circle me-1"></i>About
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../about.html">
                                <i class="fas fa-info-circle me-2"></i>About Us
                            </a></li>
                            <li><a class="dropdown-item" href="../science-certifications.html">
                                <i class="fas fa-microscope me-2"></i>Science & Certifications
                            </a></li>
                            <li><a class="dropdown-item" href="../contact.html">
                                <i class="fas fa-phone me-2"></i>Contact
                            </a></li>
                            <li><a class="dropdown-item" href="../legal-information.html">
                                <i class="fas fa-gavel me-2"></i>Legal Information
                            </a></li>
                        </ul>
                    </li>
                    
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle fw-semibold" href="#" id="shopDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-shopping-cart me-1"></i>Shop
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item active fw-semibold" href="cart.html">
                                <i class="fas fa-shopping-cart me-2"></i>View Cart 
                                <span id="cartBadgeDropdown" class="badge bg-danger ms-1" style="display: none;">0</span>
                            </a></li>
                            <li><a class="dropdown-item" href="book-service.html">
                                <i class="fas fa-calendar-plus me-2"></i>Book Service
                            </a></li>
                        </ul>
                    </li>
                    
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="accountDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user me-1"></i>Account
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../account/profile.html">
                                <i class="fas fa-building me-2"></i>Business Pricing
                                <span class="badge bg-warning text-dark ms-1">Coming Soon</span>
                            </a></li>
                            <li><a class="dropdown-item" href="../account/orders.html">
                                <i class="fas fa-user-circle me-2"></i>Consumer Pricing
                                <span class="badge bg-warning text-dark ms-1">Coming Soon</span>
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="../auth/login.html">
                                <i class="fas fa-sign-in-alt me-2"></i>Login
                                <span class="badge bg-warning text-dark ms-1">Coming Soon</span>
                            </a></li>
                            <li><a class="dropdown-item" href="../auth/register.html">
                                <i class="fas fa-user-plus me-2"></i>Register
                                <span class="badge bg-warning text-dark ms-1">Coming Soon</span>
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-5 fw-bold mb-3">Shopping Cart</h1>
                    <p class="lead mb-4">
                        Review your premium hypochlorous acid products before checkout. 
                        Professional-grade disinfectants with Utah's fastest delivery.
                    </p>
                    <div class="d-flex flex-wrap gap-1">
                        <span class="cert-badge">
                            <i class="fas fa-leaf me-1"></i> USDA Certified Organic
                        </span>
                        <span class="cert-badge">
                            <i class="fas fa-shield-alt me-1"></i> EPA Registered
                        </span>
                        <span class="cert-badge">
                            <i class="fas fa-shipping-fast me-1"></i> 2-4 Day Delivery
                        </span>
                        <span class="cert-badge">
                            <i class="fas fa-box-open me-1"></i> Wholesale Pricing
                        </span>
                    </div>
                </div>
                <div class="col-lg-6 text-end">
                    <div class="hero-stats">
                        <div class="row">
                            <div class="col-4 text-center">
                                <h3 class="mb-1" id="heroCartTotal">$0.00</h3>
                                <small class="text-light">Cart Total</small>
                            </div>
                            <div class="col-4 text-center">
                                <h4 class="mb-1" id="heroItemCount">0</h4>
                                <small class="text-light">Items</small>
                            </div>
                            <div class="col-4 text-center">
                                <a href="../products.html" class="btn btn-outline-light btn-sm">
                                    <i class="fas fa-arrow-left me-1"></i> Continue Shopping
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="cart-container p-4">
                    <!-- Cart Header -->
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h3 class="mb-0">
                            <i class="fas fa-shopping-cart me-2 text-primary"></i>Shopping Cart
                        </h3>
                        <div class="d-flex gap-3 align-items-center">
                            <small class="text-muted" id="itemCount">0 items</small>
                            <button class="btn btn-outline-danger btn-sm" onclick="clearAllItems()" id="clearCartBtn">
                                <i class="fas fa-trash me-1"></i>Clear All
                            </button>
                        </div>
                    </div>

                    <!-- Cart Items Container -->
                    <div id="cartItems">
                        <!-- Items will be dynamically inserted here -->
                    </div>

                    <!-- Empty Cart Message -->
                    <div id="emptyCart" class="empty-cart">
                        <i class="fas fa-shopping-cart text-muted"></i>
                        <h4 class="mt-3 mb-3">Your cart is empty</h4>
                        <p class="text-muted mb-4">Browse our USDA Certified Organic and EPA registered products!</p>
                        <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
                            <a href="../products.html" class="btn btn-primary btn-lg">
                                <i class="fas fa-shopping-bag me-2"></i>Browse Products
                            </a>
                            <a href="../services.html" class="btn btn-outline-primary btn-lg">
                                <i class="fas fa-spray-can me-2"></i>View Services
                            </a>
                        </div>
                        <div class="mt-4">
                            <div class="row text-center">
                                <div class="col-6 col-md-3 mb-3">
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="cert-badge bg-success text-white mb-2">
                                            <i class="fas fa-leaf"></i>
                                        </div>
                                        <small class="text-muted">19 Organic Products</small>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-3">
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="cert-badge bg-warning text-white mb-2">
                                            <i class="fas fa-crown"></i>
                                        </div>
                                        <small class="text-muted">38 Premium Products</small>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-3">
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="cert-badge bg-primary text-white mb-2">
                                            <i class="fas fa-shipping-fast"></i>
                                        </div>
                                        <small class="text-muted">Calculated by Shopify</small>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-3">
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="cert-badge bg-info text-white mb-2">
                                            <i class="fas fa-box-open"></i>
                                        </div>
                                        <small class="text-muted">Wholesale on Select Products</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- STICKY ORDER SUMMARY -->
                    <div class="sticky-order-summary" id="stickyOrderSummary" style="display: none;">
                        <div class="order-summary-content">
                            <!-- Order Icon -->
                            <div class="order-icon">
                                <i class="fas fa-receipt"></i>
                            </div>
                            
                            <!-- Order Details -->
                            <div class="order-details">
                                <div class="order-detail-item">
                                    <div class="order-detail-value" id="stickySubtotal">$0.00</div>
                                    <div class="order-detail-label">Subtotal</div>
                                </div>
                                <div class="order-detail-item" id="stickyWholesaleSavings" style="display: none;">
                                    <div class="order-detail-value text-success" id="stickyWholesaleAmount">-$0.00</div>
                                    <div class="order-detail-label">Wholesale Savings</div>
                                </div>
                                <div class="order-detail-item">
                                    <div class="order-detail-value" id="stickyTax">+Tax</div>
                                    <div class="order-detail-label">Utah Tax at Checkout</div>
                                </div>
                                <div class="order-detail-item">
                                    <div class="order-detail-value" id="stickyTotal">$0.00</div>
                                    <div class="order-detail-label">Total</div>
                                </div>
                            </div>
                            
                            <!-- Checkout Actions -->
                            <div class="checkout-actions">
                                <button class="btn checkout-cta" onclick="proceedToShopifyCheckout()" id="checkoutBtn">
                                    <i class="fas fa-lock me-2"></i>Secure Checkout
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="footer-section">
        <div class="container">
            <div class="row">
                <div class="col-md-3 mb-4">
                    <div class="footer-brand">
                        <svg width="40" height="40" viewBox="0 0 400 250" class="me-2">
                            <rect width="400" height="250" fill="#2E5EAA"/>
                            <text x="200" y="180" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="100" font-weight="bold">OHS</text>
                            <text x="200" y="210" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="20">Organic HypoSolutions</text>
                            <path d="M 320 80 Q 340 60 360 80 Q 340 100 320 80" fill="#4ADE80"/>
                            <path d="M 330 70 Q 350 50 370 70 Q 350 90 330 70" fill="#22C55E"/>
                        </svg>
                        <h5 class="footer-brand-name">Organic HypoSolutions</h5>
                    </div>
                    <p class="footer-tagline">Utah's dual-certified HOCl distributor for families and businesses.</p>
                    
                    <!-- Social Media Links -->
                    <div class="social-icons">
                        <a href="https://www.linkedin.com/company/organichyposolutions" target="_blank" aria-label="Follow us on LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="https://www.facebook.com/organichyposolutions" target="_blank" aria-label="Like us on Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://www.instagram.com/organichyposolutions" target="_blank" aria-label="Follow us on Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
                
                <div class="col-md-2 mb-4">
                    <h6 class="footer-heading">Products</h6>
                    <ul class="footer-list">
                        <li><a href="../products.html">USDA Organic (19)</a></li>
                        <li><a href="../products.html">EPA Premium (38)</a></li>
                        <li><a href="../products.html">Bulk Solutions</a></li>
                        <li><a href="../products.html">All Products</a></li>
                    </ul>
                </div>
                
                <div class="col-md-2 mb-4">
                    <h6 class="footer-heading">Certified</h6>
                    <ul class="footer-list">
                        <li><span class="cert-badge">USDA Organic</span></li>
                        <li><span class="cert-badge">EPA Registered</span></li>
                        <li><span class="cert-badge">FDA Food Safe</span></li>
                    </ul>
                </div>
                
                <div class="col-md-2 mb-4">
                    <h6 class="footer-heading">Support</h6>
                    <ul class="footer-list">
                        <li><a href="../science-certifications.html">Science</a></li>
                        <li><a href="../calculator.html">Calculator</a></li>
                        <li><a href="../about.html">About</a></li>
                        <li><a href="../contact.html">Contact</a></li>
                    </ul>
                </div>
                
                <div class="col-md-3 mb-4">
                    <h6 class="footer-heading">Contact</h6>
                    <div class="footer-contact">
                        <p class="mb-2">
                            <i class="fas fa-phone"></i>
                            <a href="tel:+18017125663">(801) 712-5663</a>
                        </p>
                        <p class="mb-2">
                            <i class="fas fa-envelope"></i>
                            <a href="mailto:ohshocl@gmail.com">ohshocl@gmail.com</a>
                        </p>
                        <p class="mb-3">
                            <i class="fas fa-map-marker-alt"></i>
                            Salt Lake City, UT, USA
                        </p>
                    </div>
                </div>
            </div>
            
            <hr class="my-4 border-secondary">
            
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2025 Organic HypoSolutions. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div class="footer-badges">
                        <span class="footer-badge">57 Products</span>
                        <span class="footer-badge">Family Owned & Operated Since 2025</span>
                        <span class="footer-badge">Shopify Secured</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Global Scripts -->
    <script src="../assets/js/global-scripts.js"></script>
    <script src="../assets/js/analytics.js"></script>
    
    <!-- Cart System JavaScript - MUST be loaded in this order -->
    <script src="js/cart.js"></script>
    <script src="js/shopify-client.js"></script>

    <script>
        // ===================================================================
        // CART SYSTEM INITIALIZATION
        // ===================================================================
        let cartItems = [];
        let isCartSystemReady = false;

        // Global banner close function
        function closeBanner() {
            const banner = document.getElementById('promoBanner');
            if (banner) {
                banner.style.display = 'none';
            }
        }
        
        // ===================================================================
        // CART DISPLAY AND MANAGEMENT
        // ===================================================================
        
        function loadCartFromLocalStorage() {
            try {
                const stored = localStorage.getItem('ohsCart');
                if (stored) {
                    const parsedCart = JSON.parse(stored);
                    // Convert to array format if needed
                    if (Array.isArray(parsedCart)) {
                        cartItems = parsedCart;
                    } else {
                        // Convert object format to array
                        cartItems = Object.keys(parsedCart).map(productId => ({
                            productId: productId,
                            name: parsedCart[productId].name || 'Unknown Product',
                            price: parseFloat(parsedCart[productId].price) || 0,
                            quantity: parseInt(parsedCart[productId].quantity) || 1,
                            type: parsedCart[productId].type || parsedCart[productId].productLine || 'organic',
                            description: parsedCart[productId].description || 'Professional hypochlorous acid product',
                            emoji: parsedCart[productId].emoji || (parsedCart[productId].type === 'premium' ? '👑' : '🌱'),
                            sku: parsedCart[productId].sku || '',
                            variantId: parsedCart[productId].variantId || null
                        }));
                    }
                } else {
                    cartItems = [];
                }
                
                console.log('✅ Cart loaded:', cartItems.length, 'items');
            } catch (error) {
                console.error('❌ Error loading cart:', error);
                cartItems = [];
            }
        }
        
        function saveCartToLocalStorage() {
            try {
                localStorage.setItem('ohsCart', JSON.stringify(cartItems));
                console.log('💾 Cart saved successfully');
                // Dispatch storage event for cross-page updates
                window.dispatchEvent(new StorageEvent('storage', {
                    key: 'ohsCart',
                    newValue: JSON.stringify(cartItems)
                }));
            } catch (error) {
                console.error('❌ Error saving cart:', error);
            }
        }
        
        // ===================================================================
        // WHOLESALE CALCULATION ENGINE
        // ===================================================================
        
        function calculateWholesaleRate(productId, quantity) {
            // Wholesale thresholds - matches your existing cart.js logic
            const wholesaleThresholds = {
                'ohs-32oz-organic-cleaner': { threshold: 500, discount: 0.3 },
                'hc-32oz-cleaner-rtu': { threshold: 25, discount: 0.25 },
                'ohs-3oz-disinfectant': { threshold: 1000, discount: 0.35 },
                'default': { threshold: 25, discount: 0.25 }
            };
            
            const productWholesale = wholesaleThresholds[productId] || wholesaleThresholds['default'];
            const isWholesale = quantity >= productWholesale.threshold;
            
            return {
                isWholesale: isWholesale,
                threshold: productWholesale.threshold,
                discount: productWholesale.discount,
                savingsPercent: isWholesale ? Math.round(productWholesale.discount * 100) : 0
            };
        }
        
        // ===================================================================
        // CART DISPLAY FUNCTIONS
        // ===================================================================
        
        function updateCartDisplay() {
            updateCartItems();
            updateOrderSummary();
            updateCartBadges();
            updateItemCount();
            updateHeroStats();
            updateStickyVisibility();
        }
        
        function updateCartItems() {
            const container = document.getElementById('cartItems');
            const emptyCart = document.getElementById('emptyCart');
            
            if (!container || !emptyCart) return;
            
            if (cartItems.length === 0) {
                container.style.display = 'none';
                emptyCart.style.display = 'block';
                return;
            }
            
            container.style.display = 'block';
            emptyCart.style.display = 'none';
            
            let html = '';
            cartItems.forEach((item, index) => {
                const isOrganic = item.type === 'organic';
                const wholesaleInfo = calculateWholesaleRate(item.productId, item.quantity);
                const displayPrice = wholesaleInfo.isWholesale ? 
                    item.price * (1 - wholesaleInfo.discount) : item.price;
                const itemTotal = displayPrice * item.quantity;
                
                html += `
                    <div class="cart-item" data-index="${index}">
                        <div class="row align-items-center">
                            <div class="col-md-2 col-3 mb-3 mb-md-0">
                                <div class="product-image ${isOrganic ? 'organic' : 'premium'}">
                                    ${item.emoji || (isOrganic ? '🌱' : '👑')}
                                </div>
                            </div>
                            <div class="col-md-3 col-9 mb-3 mb-md-0">
                                <h6 class="fw-bold mb-2">${item.name}</h6>
                                <p class="text-muted small mb-2">${item.description}</p>
                                <div class="mb-2">
                                    <span class="badge ${isOrganic ? 'badge-organic' : 'badge-premium'}">
                                        ${isOrganic ? 'USDA Organic' : 'EPA Premium'}
                                    </span>
                                    ${item.sku ? `<span class="badge bg-info ms-1">${item.sku}</span>` : ''}
                                    ${wholesaleInfo.isWholesale ? `
                                        <div class="mt-1">
                                            <span class="wholesale-achieved-badge">
                                                <i class="fas fa-check-circle me-1"></i>Wholesale Price (${wholesaleInfo.savingsPercent}% Off)
                                            </span>
                                        </div>
                                    ` : `
                                        <div class="mt-1">
                                            <span class="wholesale-threshold-badge">
                                                <i class="fas fa-box-open me-1"></i>Buy ${wholesaleInfo.threshold - item.quantity} more for wholesale
                                            </span>
                                        </div>
                                    `}
                                </div>
                            </div>
                            <div class="col-md-3 col-12 mb-3 mb-md-0">
                                <div class="quantity-controls">
                                    <button class="quantity-btn" onclick="changeQuantity(${index}, -1)" 
                                            ${item.quantity <= 1 ? 'disabled' : ''}>
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" class="quantity-input" value="${item.quantity}" 
                                           min="1" max="999" 
                                           onchange="setQuantity(${index}, this.value)"
                                           onclick="this.select()">
                                    <button class="quantity-btn" onclick="changeQuantity(${index}, 1)">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-2 col-6 text-center">
                                <div class="price-display">$${displayPrice.toFixed(2)}</div>
                                <small class="text-muted">each</small>
                                ${wholesaleInfo.isWholesale ? `
                                    <div class="discount-amount">Save $${(item.price * wholesaleInfo.discount).toFixed(2)}</div>
                                ` : ''}
                            </div>
                            <div class="col-md-2 col-6 text-center">
                                <div class="price-display mb-2">$${itemTotal.toFixed(2)}</div>
                                <button class="btn btn-sm btn-outline-danger" onclick="removeItem(${index})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function updateOrderSummary() {
            let subtotal = 0;
            let totalWholesaleSavings = 0;
            
            cartItems.forEach(item => {
                const wholesaleInfo = calculateWholesaleRate(item.productId, item.quantity);
                const displayPrice = wholesaleInfo.isWholesale ? 
                    item.price * (1 - wholesaleInfo.discount) : item.price;
                const itemTotal = displayPrice * item.quantity;
                subtotal += itemTotal;
                
                if (wholesaleInfo.isWholesale) {
                    totalWholesaleSavings += (item.price * wholesaleInfo.discount * item.quantity);
                }
            });
            
            // Update sticky summary
            document.getElementById('stickySubtotal').textContent = '$' + subtotal.toFixed(2);
            document.getElementById('stickyTotal').textContent = '$' + subtotal.toFixed(2);
            
            // Show/hide wholesale savings
            const wholesaleSavingsElement = document.getElementById('stickyWholesaleSavings');
            if (totalWholesaleSavings > 0) {
                wholesaleSavingsElement.style.display = 'block';
                document.getElementById('stickyWholesaleAmount').textContent = '-$' + totalWholesaleSavings.toFixed(2);
            } else {
                wholesaleSavingsElement.style.display = 'none';
            }
        }
        
        function updateCartBadges() {
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            
            // Update all cart badges
            const badges = ['cartBadge', 'cartBadgeDropdown'];
            badges.forEach(badgeId => {
                const badge = document.getElementById(badgeId);
                if (badge) {
                    badge.style.display = totalItems > 0 ? 'inline-block' : 'none';
                    badge.textContent = totalItems;
                }
            });

            // Update global cart badge if available
            if (typeof updateCartBadge === 'function') {
                updateCartBadge();
            }
        }
        
        function updateItemCount() {
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            const itemCount = document.getElementById('itemCount');
            if (itemCount) {
                itemCount.textContent = totalItems === 1 ? '1 item' : totalItems + ' items';
            }
        }
        
        function updateHeroStats() {
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            let subtotal = 0;
            
            cartItems.forEach(item => {
                const wholesaleInfo = calculateWholesaleRate(item.productId, item.quantity);
                const displayPrice = wholesaleInfo.isWholesale ? 
                    item.price * (1 - wholesaleInfo.discount) : item.price;
                subtotal += displayPrice * item.quantity;
            });
            
            const heroTotal = document.getElementById('heroCartTotal');
            const heroCount = document.getElementById('heroItemCount');
            
            if (heroTotal) heroTotal.textContent = '$' + subtotal.toFixed(2);
            if (heroCount) heroCount.textContent = totalItems;
        }
        
        function updateStickyVisibility() {
            const stickyBar = document.getElementById('stickyOrderSummary');
            if (cartItems.length > 0) {
                stickyBar.style.display = 'block';
            } else {
                stickyBar.style.display = 'none';
            }
        }
        
        // ===================================================================
        // CART MANAGEMENT FUNCTIONS
        // ===================================================================
        
        function changeQuantity(index, change) {
            if (!cartItems[index]) return;
            
            const newQuantity = cartItems[index].quantity + change;
            
            if (newQuantity <= 0) {
                if (confirm(`Remove "${cartItems[index].name}" from cart?`)) {
                    cartItems.splice(index, 1);
                }
            } else {
                cartItems[index].quantity = newQuantity;
            }
            
            saveCartToLocalStorage();
            updateCartDisplay();
        }
        
        function setQuantity(index, value) {
            if (!cartItems[index]) return;
            
            const newQuantity = Math.max(1, Math.min(999, parseInt(value) || 1));
            cartItems[index].quantity = newQuantity;
            
            saveCartToLocalStorage();
            updateCartDisplay();
        }
        
        function removeItem(index) {
            if (!cartItems[index]) return;
            
            if (confirm(`Remove "${cartItems[index].name}" from cart?`)) {
                cartItems.splice(index, 1);
                saveCartToLocalStorage();
                updateCartDisplay();
            }
        }
        
        function clearAllItems() {
            if (cartItems.length === 0) {
                showNotification('Your cart is already empty!', 'info');
                return;
            }
            
            if (confirm(`Clear all ${cartItems.length} items from cart?`)) {
                cartItems = [];
                saveCartToLocalStorage();
                updateCartDisplay();
                showNotification('Cart cleared successfully!', 'success');
            }
        }
        
        // ===================================================================
        // SHOPIFY CHECKOUT INTEGRATION
        // ===================================================================
        
        async function proceedToShopifyCheckout() {
            if (cartItems.length === 0) {
                showNotification('Your cart is empty! Add some products first.', 'warning');
                return;
            }
            
            const checkoutBtn = document.getElementById('checkoutBtn');
            const originalText = checkoutBtn.innerHTML;
            
            // Show loading state
            checkoutBtn.disabled = true;
            checkoutBtn.innerHTML = '<span class="spinner me-2"></span>Creating Checkout...';
            
            try {
                console.log('🛒 Starting Shopify checkout process...');
                
                // Convert cart items to Shopify line items format
                const lineItems = cartItems.map(item => {
                    const wholesaleInfo = calculateWholesaleRate(item.productId, item.quantity);
                    const finalPrice = wholesaleInfo.isWholesale ? 
                        item.price * (1 - wholesaleInfo.discount) : item.price;
                    
                    return {
                        variantId: item.variantId || `gid://shopify/ProductVariant/${item.productId}`,
                        quantity: item.quantity,
                        customAttributes: [
                            { key: "Product_Name", value: item.name },
                            { key: "Original_Price", value: item.price.toString() },
                            { key: "Final_Price", value: finalPrice.toString() },
                            { key: "Wholesale_Applied", value: wholesaleInfo.isWholesale.toString() },
                            { key: "Product_Type", value: item.type }
                        ]
                    };
                });
                
                console.log('📋 Line items prepared:', lineItems);
                
                // Call your API endpoint to create checkout
                const response = await fetch('/api/shopify/create-checkout', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ lineItems })
                });
                
                if (!response.ok) {
                    throw new Error(`Checkout API failed: ${response.status}`);
                }
                
                const result = await response.json();
                console.log('✅ Shopify checkout response:', result);
                
                if (result.checkoutUrl) {
                    // Track checkout initiation
                    if (typeof gtag !== 'undefined') {
                        const totalValue = cartItems.reduce((sum, item) => {
                            const wholesaleInfo = calculateWholesaleRate(item.productId, item.quantity);
                            const finalPrice = wholesaleInfo.isWholesale ? 
                                item.price * (1 - wholesaleInfo.discount) : item.price;
                            return sum + (finalPrice * item.quantity);
                        }, 0);
                        
                        gtag('event', 'begin_checkout', {
                            'currency': 'USD',
                            'value': totalValue,
                            'items': cartItems.map(item => ({
                                'item_id': item.productId,
                                'item_name': item.name,
                                'quantity': item.quantity,
                                'price': item.price
                            }))
                        });
                    }
                    
                    console.log('🔗 Redirecting to Shopify checkout:', result.checkoutUrl);
                    
                    // Store checkout info and redirect
                    localStorage.setItem('ohsCheckoutId', result.checkoutId || '');
                    window.location.href = result.checkoutUrl;
                    
                } else {
                    throw new Error('No checkout URL received from Shopify');
                }
                
            } catch (error) {
                console.error('❌ Checkout error:', error);
                showNotification('Checkout failed. Please try again or contact support.', 'error');
                
                // Reset button
                checkoutBtn.disabled = false;
                checkoutBtn.innerHTML = originalText;
            }
        }
        
        // ===================================================================
        // UTILITY FUNCTIONS
        // ===================================================================
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type === 'error' ? 'danger' : type} alert-dismissible`;
            notification.style.cssText = `
                position: fixed; top: 120px; right: 20px; z-index: 9999;
                min-width: 300px; max-width: 400px;
                box-shadow: 0 8px 25px rgba(0,0,0,0.15);
                transform: translateX(450px);
                transition: all 0.3s ease;
            `;
            notification.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : type === 'error' ? 'times-circle' : 'info-circle'} me-2"></i>
                    <div>${message}</div>
                    <button type="button" class="btn-close ms-auto" onclick="this.parentElement.parentElement.remove()"></button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => notification.style.transform = 'translateX(0)', 100);
            setTimeout(() => {
                notification.style.transform = 'translateX(450px)';
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.parentElement.removeChild(notification);
                    }
                }, 300);
            }, 4000);
        }
        
        // ===================================================================
        // INITIALIZATION
        // ===================================================================
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Cart system initializing...');
            
            // Load cart data
            loadCartFromLocalStorage();
            
            // Update display
            updateCartDisplay();
            
            // Listen for storage changes (cross-tab cart sync)
            window.addEventListener('storage', function(e) {
                if (e.key === 'ohsCart') {
                    console.log('🔄 Cart updated in another tab, reloading...');
                    loadCartFromLocalStorage();
                    updateCartDisplay();
                }
            });
            
            isCartSystemReady = true;
            console.log('✅ Cart system ready!');
        });
        
        // Expose global functions for external access
        window.changeQuantity = changeQuantity;
        window.setQuantity = setQuantity;
        window.removeItem = removeItem;
        window.clearAllItems = clearAllItems;
        window.proceedToShopifyCheckout = proceedToShopifyCheckout;
        window.proceedToCheckout = proceedToShopifyCheckout; // Alias for compatibility
        
        // Debug functions for testing
        window.addTestItem = function(productId, name, price, type = 'organic') {
            cartItems.push({
                productId: productId || 'test-' + Date.now(),
                name: name || 'Test Product',
                price: price || 25.00,
                quantity: 1,
                type: type,
                description: 'Test product for development',
                emoji: type === 'premium' ? '👑' : '🌱',
                sku: 'TEST-SKU',
                variantId: null
            });
            saveCartToLocalStorage();
            updateCartDisplay();
            console.log('✅ Test item added to cart');
        };
        
        window.debugCart = function() {
            console.log('🐛 Cart Debug Info:');
            console.log('Cart Items:', cartItems);
            console.log('Local Storage:', localStorage.getItem('ohsCart'));
            console.log('Cart Ready:', isCartSystemReady);
        };
    </script>
</body>
</html>
