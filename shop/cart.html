<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - Organic HypoSolutions</title>
    <meta name="description" content="Complete your order of premium USDA Certified Organic and EPA registered HOCl products. Professional sanitization solutions with secure checkout and volume pricing.">
    <meta name="keywords" content="organic cleaning product cart, professional disinfectant ordering, bulk sanitizer purchasing, Utah cleaning supply order, commercial product checkout, disinfectant bulk pricing, USDA certified organic cart, EPA registered sanitizer">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Shopping Cart - Organic HypoSolutions">
    <meta property="og:description" content="Complete your order of USDA Certified Organic and EPA registered HOCl products">
    <meta property="og:url" content="https://organichyposolutions.com/shop/cart.html">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- SHOPIFY READY SCHEMA MARKUP -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Shopping Cart",
      "description": "Professional HOCl sanitization products cart with USDA Organic and EPA Premium lines",
      "url": "https://organichyposolutions.com/shop/cart.html",
      "provider": {
        "@type": "Organization",
        "name": "Organic HypoSolutions",
        "url": "https://organichyposolutions.com",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Salt Lake City",
          "addressRegion": "Utah",
          "addressCountry": "US"
        },
        "contactPoint": {
          "@type": "ContactPoint",
          "telephone": "+1-801-712-5663",
          "contactType": "customer service"
        }
      }
    }
    </script>
    
    <style>
        :root {
            --primary-blue: #2E5EAA;
            --light-blue: #7DD3FC;
            --primary-green: #4ADE80;
            --secondary-green: #22C55E;
            --warning-gold: #f59e0b;
            --light-gray: #f8fafc;
            --danger-color: #dc3545;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-gray);
        }

        /* Navigation Styles - FIXED ICON ALIGNMENT */
        .navbar {
            background: linear-gradient(135deg, var(--primary-blue), var(--light-blue)) !important;
        }

        .navbar-brand {
            font-weight: 700;
            color: white !important;
        }

        /* FIX: Proper icon and text alignment */
        .nav-link {
            color: white !important;
            transition: color 0.3s ease;
            font-weight: 500;
            display: flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
        }

        .nav-link:hover {
            color: var(--light-blue) !important;
            background-color: rgba(255,255,255,0.1);
            border-radius: 4px;
        }

        .dropdown-toggle {
            display: flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
        }

        /* Mobile nav fixes */
        @media (max-width: 991.98px) {
            .navbar-nav .nav-link {
                padding: 0.5rem 0.75rem !important;
                display: flex !important;
                align-items: center !important;
                gap: 0.5rem !important;
            }
        }

        .navbar-toggler {
            border-color: rgba(255,255,255,0.3);
        }

        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='m4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }

        .dropdown-menu {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: none;
            border-radius: 8px;
        }

        .dropdown-item {
            padding: 0.75rem 1.25rem;
            transition: background-color 0.3s ease;
            display: flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
        }

        .dropdown-item:hover {
            background-color: var(--light-gray);
            color: var(--primary-blue);
        }

        .dropdown-item i {
            width: 20px;
            flex-shrink: 0;
        }

        /* Badge Styles */
        .badge-under-construction {
            background-color: var(--warning-gold);
            color: #fff;
        }

        .badge-wholesale {
            background-color: var(--primary-blue);
            color: #fff;
        }

        .badge-organic {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            font-weight: 600;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
        }

        /* Hero Section - GREEN GRADIENT */
        .hero-section {
            background: linear-gradient(135deg, #22c55e, #4ade80, #10b981);
            color: white;
            padding: 4rem 0;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
        }

        .hero-section .container {
            position: relative;
            z-index: 2;
        }

        .hero-section h1 {
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* PROMO BANNER STYLING - ORANGE */
        .promo-banner {
            background: linear-gradient(135deg, #f97316, #fb923c);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 1rem 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(249, 115, 22, 0.3);
            font-weight: 600;
        }

        /* Cart Container - WHITE ROUNDED DESIGN */
        .cart-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: -3rem;
            position: relative;
            z-index: 10;
            border: 1px solid rgba(0,0,0,0.05);
        }

        /* CART ITEMS STYLING */
        .cart-item {
            border-bottom: 2px solid #f1f5f9;
            padding: 2rem 0;
            transition: all 0.3s ease;
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .cart-item:hover {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        /* PRODUCT IMAGES WITH COLORED BACKGROUNDS */
        .product-image {
            width: 90px;
            height: 90px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 3px solid white;
        }

        .product-image.organic {
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }

        .product-image.premium {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        /* SHOPIFY-READY BADGES */
        .certification-badge {
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.3rem 0.6rem;
            border-radius: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .usda-organic {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }

        .epa-registered {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .health-safety {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        /* QUANTITY CONTROLS - SHOPIFY READY */
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            background: #f8fafc;
            padding: 0.5rem;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border: 2px solid var(--primary-green);
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--primary-green);
            font-weight: bold;
        }

        .quantity-btn:hover:not(:disabled) {
            background: var(--primary-green);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
        }

        .quantity-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quantity-input {
            width: 70px;
            text-align: center;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 0.6rem;
            font-weight: bold;
            background: white;
            color: var(--primary-blue);
        }

        /* PRICING DISPLAY */
        .price-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-green);
        }

        .subscription-price {
            color: #059669;
            font-size: 0.9rem;
        }

        .wholesale-price {
            color: var(--primary-blue);
            font-size: 0.9rem;
        }

        /* ORDER SUMMARY - STYLED */
        .order-summary {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 20px;
            padding: 2.5rem;
            position: sticky;
            top: 2rem;
            border: 2px solid #e2e8f0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }

        .order-summary h4 {
            color: var(--primary-blue);
            font-weight: bold;
            border-bottom: 3px solid var(--primary-green);
            padding-bottom: 0.5rem;
            margin-bottom: 2rem;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem 0;
            border-bottom: 1px solid #e2e8f0;
            font-weight: 500;
        }

        .summary-row:last-child {
            border-bottom: 3px solid var(--primary-green);
            font-weight: bold;
            font-size: 1.3rem;
            color: var(--primary-blue);
            background: linear-gradient(135deg, #ecfdf5, #dcfce7);
            margin: 1rem -1rem;
            padding: 1rem;
            border-radius: 12px;
        }

        .discount-text {
            color: #22c55e;
            font-weight: bold;
        }

        .free-shipping {
            color: #22c55e;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* SHOPIFY INTEGRATION STYLING */
        .shopify-ready {
            background: linear-gradient(135deg, #7c3aed, #5b21b6);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* CHECKOUT BUTTON - SHOPIFY STYLE */
        .btn-checkout {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border: none;
            border-radius: 15px;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        .btn-checkout:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.6);
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .hero-section {
                padding: 2rem 0;
            }
            
            .cart-container {
                margin: 0 1rem;
                margin-top: -1rem;
            }
            
            .order-summary {
                position: static;
                margin-top: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation - FIXED ALIGNMENT -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="../index.html">
                <!-- OHS Logo -->
                <svg width="40" height="40" viewBox="0 0 400 250" class="me-2">
                    <rect width="400" height="250" fill="#2E5EAA"/>
                    <text x="200" y="180" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="100" font-weight="bold">OHS</text>
                    <text x="200" y="210" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="20">Organic HypoSolutions</text>
                    <path d="M 320 80 Q 340 60 360 80 Q 340 100 320 80" fill="#4ADE80"/>
                    <path d="M 330 70 Q 350 50 370 70 Q 350 90 330 70" fill="#22C55E"/>
                </svg>
                <span class="fw-bold">Organic HypoSolutions</span>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">
                            <i class="fas fa-home"></i>
                            <span>Home</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../services.html">
                            <i class="fas fa-spray-can"></i>
                            <span>Services</span>
                        </a>
                    </li>
                    
                    <!-- Products Dropdown -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="productsDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-leaf"></i>
                            <span>Products</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../products.html">
                                <i class="fas fa-boxes"></i>
                                <span>All Products</span>
                            </a></li>
                            <li><a class="dropdown-item" href="../products.html#organic">
                                <i class="fas fa-seedling"></i>
                                <span>USDA Organic Line</span>
                                <span class="badge badge-organic ms-2">Certified</span>
                            </a></li>
                            <li><a class="dropdown-item" href="../products.html#premium">
                                <i class="fas fa-star"></i>
                                <span>EPA Premium Line</span>
                                <span class="badge badge-wholesale ms-2">Professional</span>
                            </a></li>
                        </ul>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="../calculator.html">
                            <i class="fas fa-calculator"></i>
                            <span>Calculator</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../about.html">
                            <i class="fas fa-info-circle"></i>
                            <span>About</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../science-certifications.html">
                            <i class="fas fa-certificate"></i>
                            <span>Science & Certifications</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../legal-information.html">
                            <i class="fas fa-gavel"></i>
                            <span>Legal Information</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../contact.html">
                            <i class="fas fa-phone"></i>
                            <span>Contact</span>
                        </a>
                    </li>
                    
                    <!-- Shop Dropdown - FIXED CART COUNT -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="shopDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-shopping-bag"></i>
                            <span>Shop</span>
                            <span id="cartBadge" class="badge bg-danger ms-1" style="display: none;">0</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../products.html">
                                <i class="fas fa-boxes"></i>
                                <span>All Products</span>
                            </a></li>
                            <li><a class="dropdown-item active" href="cart.html">
                                <i class="fas fa-shopping-cart"></i>
                                <span>Cart</span>
                                <span id="cartBadgeDropdown" class="badge bg-danger ms-1" style="display: none;">0</span>
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="checkout.html">
                                <i class="fas fa-credit-card"></i>
                                <span>Checkout</span>
                                <span class="badge shopify-ready ms-1">Shopify Ready</span>
                            </a></li>
                            <li><a class="dropdown-item" href="account.html">
                                <i class="fas fa-user"></i>
                                <span>My Account</span>
                                <span class="badge shopify-ready ms-1">Shopify Ready</span>
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="wholesale.html">
                                <i class="fas fa-handshake"></i>
                                <span>Wholesale Portal</span>
                                <span class="badge badge-wholesale ms-1">Business</span>
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container text-center">
            <h1 class="display-4 fw-bold mb-3">Your Shopping Cart</h1>
            <p class="lead">Complete your order of premium USDA Certified Organic and EPA registered HOCl products</p>
            <div class="small mt-2">
                <span class="badge usda-organic me-2">USDA Organic #Z-699995-2008</span>
                <span class="badge epa-registered">EPA Reg. #97801-1</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="cart-container p-4">
            <!-- Promo Banner -->
            <div class="promo-banner text-center" role="alert">
                <i class="fas fa-shipping-fast me-2"></i>
                <strong>Limited Time:</strong> FREE SHIPPING on all orders + Volume Discounts up to 28.6% OFF! 
                <span class="badge shopify-ready ms-2">Pricing Integrated</span>
            </div>

            <div class="row">
                <!-- Cart Items -->
                <div class="col-lg-8">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h3>Shopping Cart</h3>
                        <div class="d-flex gap-3 align-items-center">
                            <small class="text-muted" id="itemCount">2 items</small>
                            <div class="dropdown">
                                <button class="btn btn-outline-secondary btn-sm dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="fas fa-cog"></i> Options
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#" onclick="saveCart()">
                                        <i class="fas fa-save"></i> Save Cart
                                    </a></li>
                                    <li><a class="dropdown-item" href="#" onclick="shareCart()">
                                        <i class="fas fa-share"></i> Share Cart
                                    </a></li>
                                    <li><a class="dropdown-item" href="#" onclick="addDemoProducts()">
                                        <i class="fas fa-flask"></i> Add Demo Products
                                    </a></li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item text-danger" href="#" onclick="clearCart()">
                                        <i class="fas fa-trash"></i> Clear Cart
                                    </a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Cart Items Container - EMPTY BY DEFAULT -->
                    <div id="cartItems" style="display: none;">
                        <!-- Dynamic cart items will be inserted here -->
                    </div>

                    <!-- Empty Cart Message - SHOW BY DEFAULT -->
                    <div id="emptyCart" class="text-center py-5">
                        <i class="fas fa-shopping-cart text-muted" style="font-size: 4rem;"></i>
                        <h4 class="text-muted mt-3">Your cart is empty</h4>
                        <p class="text-muted">Browse our USDA Certified Organic and EPA registered products!</p>
                        <a href="../products.html" class="btn btn-primary">
                            <i class="fas fa-shopping-bag me-2"></i>Browse Products
                        </a>
                    </div>

                    <!-- Professional Service Add-on -->
                    <div style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); border: 3px dashed var(--primary-blue); border-radius: 20px; padding: 2.5rem; margin: 3rem 0; text-align: center; box-shadow: 0 8px 25px rgba(46, 94, 170, 0.1);">
                        <h5 style="color: var(--primary-blue); font-weight: bold; margin-bottom: 1rem;">
                            <i class="fas fa-tools text-primary me-2"></i>Add Professional Service
                        </h5>
                        <p class="mb-3">Combine product orders with professional sanitization services for maximum protection.</p>
                        <div class="row">
                            <div class="col-md-6">
                                <button class="btn btn-outline-primary w-100 mb-2" onclick="calculateService()">
                                    <i class="fas fa-calculator me-2"></i>Calculate Service Cost
                                </button>
                            </div>
                            <div class="col-md-6">
                                <button class="btn btn-primary w-100">
                                    <i class="fas fa-calendar-plus me-2"></i>Book Service
                                </button>
                            </div>
                        </div>
                        <small class="d-block mt-2">
                            <span class="badge shopify-ready">Service Booking Integration Ready</span>
                        </small>
                    </div>
                </div>

                <!-- Order Summary - SHOPIFY READY -->
                <div class="col-lg-4">
                    <div class="order-summary">
                        <h4 class="mb-4">Order Summary</h4>
                        
                        <!-- REAL PRICING CALCULATIONS -->
                        <div class="summary-row">
                            <span>Subtotal (3 items):</span>
                            <span id="subtotal">$72.05</span>
                        </div>
                        <div class="summary-row">
                            <span>Volume Discount (15%):</span>
                            <span id="discount" class="discount-text">-$10.81</span>
                        </div>
                        <div class="summary-row">
                            <span>Shipping:</span>
                            <span id="shipping" class="free-shipping">FREE</span>
                        </div>
                        <div class="summary-row">
                            <span>Utah Tax (7.75%):</span>
                            <span id="tax">$4.75</span>
                        </div>
                        <div class="summary-row">
                            <span><strong>Total:</strong></span>
                            <span id="total"><strong>$65.99</strong></span>
                        </div>

                        <!-- SHOPIFY COUPON INTEGRATION -->
                        <div class="mt-4">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Enter coupon code" id="couponCode" 
                                       data-shopify-discount-code="true">
                                <button class="btn btn-outline-secondary" type="button" onclick="applyCoupon()">Apply</button>
                            </div>
                            <small class="text-muted">
                                <i class="fas fa-tag me-1"></i>
                                <span class="badge shopify-ready">Shopify Discount API Ready</span>
                            </small>
                        </div>

                        <!-- SUBSCRIPTION OPTIONS -->
                        <div class="mt-4 p-3" style="background: #f0f9ff; border-radius: 12px; border: 1px solid #0ea5e9;">
                            <h6 style="color: #0369a1; margin-bottom: 1rem;">
                                <i class="fas fa-sync me-1"></i> Subscription Options
                            </h6>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="orderType" id="oneTime" value="one-time" checked>
                                <label class="form-check-label" for="oneTime">
                                    One-time purchase
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="orderType" id="monthly" value="monthly">
                                <label class="form-check-label" for="monthly">
                                    Monthly subscription <span class="text-success">(Save 8%)</span>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="orderType" id="quarterly" value="quarterly">
                                <label class="form-check-label" for="quarterly">
                                    Quarterly subscription <span class="text-success">(Save 10%)</span>
                                </label>
                            </div>
                        </div>

                        <!-- CHECKOUT SECTION -->
                        <div style="background: linear-gradient(135deg, #ffffff, #f8fafc); border-radius: 20px; padding: 2.5rem; box-shadow: 0 8px 25px rgba(0,0,0,0.1); border: 2px solid #e2e8f0; margin-top: 2rem;">
                            <h5 style="color: var(--primary-blue); font-weight: bold; text-align: center; margin-bottom: 1.5rem;">
                                Secure Checkout
                            </h5>
                            
                            <!-- Payment Icons -->
                            <div style="display: flex; gap: 1rem; justify-content: center; margin: 1.5rem 0;">
                                <div style="width: 50px; height: 32px; background: linear-gradient(135deg, #f8fafc, #e2e8f0); border: 2px solid #cbd5e1; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: bold; color: #475569;">VISA</div>
                                <div style="width: 50px; height: 32px; background: linear-gradient(135deg, #f8fafc, #e2e8f0); border: 2px solid #cbd5e1; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: bold; color: #475569;">MC</div>
                                <div style="width: 50px; height: 32px; background: linear-gradient(135deg, #f8fafc, #e2e8f0); border: 2px solid #cbd5e1; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: bold; color: #475569;">AMEX</div>
                                <div style="width: 50px; height: 32px; background: linear-gradient(135deg, #f8fafc, #e2e8f0); border: 2px solid #cbd5e1; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: bold; color: #475569;">PP</div>
                                <div style="width: 50px; height: 32px; background: linear-gradient(135deg, #f8fafc, #e2e8f0); border: 2px solid #cbd5e1; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: bold; color: #475569;">GPay</div>
                            </div>
                            
                            <button class="btn btn-primary w-100 btn-lg btn-checkout" onclick="proceedToCheckout()" 
                                    data-shopify-checkout="true">
                                <i class="fas fa-lock me-2"></i>Secure Checkout
                            </button>
                            
                            <div class="text-center mt-3">
                                <small class="text-muted">
                                    <i class="fas fa-shield-alt me-1"></i>256-bit SSL encryption
                                </small>
                                <br>
                                <span class="badge shopify-ready mt-1">Shopify Payments Ready</span>
                            </div>

                            <!-- Quick Actions -->
                            <div class="row mt-4">
                                <div class="col-6">
                                    <button class="btn btn-outline-primary w-100" onclick="requestQuote()">
                                        <i class="fas fa-file-invoice me-1"></i> Request Quote
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button class="btn btn-outline-success w-100" onclick="callToOrder()">
                                        <i class="fas fa-phone me-1"></i> Call to Order
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Business Options -->
                            <div class="mt-3">
                                <div class="small text-center">
                                    <a href="wholesale.html" class="text-decoration-none">
                                        <i class="fas fa-handshake me-1"></i>Need wholesale pricing?
                                    </a>
                                    <br>
                                    <span class="badge badge-wholesale mt-1">Volume Discounts Available</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SHOPIFY-READY PRODUCT RECOMMENDATIONS -->
            <div class="mt-5 p-4" style="background: linear-gradient(135deg, #f1f5f9, #e2e8f0); border-radius: 20px;">
                <h4 class="text-center mb-4" style="color: var(--primary-blue);">
                    <i class="fas fa-users me-2"></i>Customers Also Bought
                </h4>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <div style="background: white; border-radius: 15px; padding: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 2px solid transparent; position: relative;">
                            <span style="position: absolute; top: 10px; right: 10px; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.7rem; font-weight: bold; text-transform: uppercase; background: linear-gradient(135deg, #ef4444, #dc2626); color: white;">Hot Pick</span>
                            <div class="text-center mb-3">
                                <i class="fas fa-paw text-primary" style="font-size: 2.5rem;"></i>
                            </div>
                            <h6 class="fw-bold">32oz Organic Pet+ Solution</h6>
                            <p class="small text-muted">Professional grade pet wound care solution - USDA Organic</p>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <div class="price-display">$24.59</div>
                                <span class="certification-badge usda-organic">USDA Organic</span>
                            </div>
                            <div class="small text-muted mb-2">
                                SKU: OHS-32OZ-PET-SOLUTION<br>
                                <span class="wholesale-price">Wholesale: $18.20 (26% off)</span>
                            </div>
                            <button class="btn btn-primary w-100" onclick="addToCart('ohs-32oz-pet-solution')" 
                                    data-shopify-product-id="pet-solution-32oz">
                                <i class="fas fa-plus me-1"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div style="background: white; border-radius: 15px; padding: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 2px solid transparent; position: relative;">
                            <span style="position: absolute; top: 10px; right: 10px; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.7rem; font-weight: bold; text-transform: uppercase; background: linear-gradient(135deg, #f59e0b, #d97706); color: white;">Limited Stock</span>
                            <div class="text-center mb-3">
                                <i class="fas fa-tshirt text-warning" style="font-size: 2.5rem;"></i>
                            </div>
                            <h6 class="fw-bold">32oz Organic Laundry Booster</h6>
                            <p class="small text-muted">Professional grade laundry sanitizer - USDA Organic</p>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <div class="price-display">$23.86</div>
                                <span class="certification-badge usda-organic">USDA Organic</span>
                            </div>
                            <div class="small text-muted mb-2">
                                SKU: OHS-32OZ-LAUNDRY<br>
                                <span class="wholesale-price">Wholesale: $17.64 (26% off)</span>
                            </div>
                            <button class="btn btn-primary w-100" onclick="addToCart('ohs-32oz-laundry')" 
                                    data-shopify-product-id="laundry-booster-32oz">
                                <i class="fas fa-plus me-1"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div style="background: white; border-radius: 15px; padding: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: all 0.3s ease; border: 2px solid transparent; position: relative;">
                            <span style="position: absolute; top: 10px; right: 10px; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.7rem; font-weight: bold; text-transform: uppercase; background: linear-gradient(135deg, #10b981, #059669); color: white;">Best Seller</span>
                            <div class="text-center mb-3">
                                <i class="fas fa-box text-success" style="font-size: 2.5rem;"></i>
                            </div>
                            <h6 class="fw-bold">Organic Ready-to-Use Value Bundle</h6>
                            <p class="small text-muted">Complete cleaning solution bundle - saves $19.45</p>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <div class="price-display">$73.92</div>
                                <span class="certification-badge usda-organic">Bundle</span>
                            </div>
                            <div class="small text-muted mb-2">
                                SKU: OHS-RTU-VALUE-BUNDLE<br>
                                <span class="wholesale-price">Wholesale: $54.70 (26% off)</span>
                            </div>
                            <button class="btn btn-primary w-100" onclick="addToCart('ohs-rtu-bundle')" 
                                    data-shopify-product-id="value-bundle-rtu">
                                <i class="fas fa-plus me-1"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-3">
                    <span class="badge shopify-ready">Shopify Recommendations API Ready</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5 mt-5">
        <div class="container">
            <div class="row">
                <!-- Company Info -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="d-flex align-items-center mb-3">
                        <!-- OHS Logo -->
                        <svg width="40" height="40" viewBox="0 0 400 250" class="me-2">
                            <rect width="400" height="250" fill="#2E5EAA"/>
                            <text x="200" y="180" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="100" font-weight="bold">OHS</text>
                            <text x="200" y="210" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="20">Organic HypoSolutions</text>
                            <path d="M 320 80 Q 340 60 360 80 Q 340 100 320 80" fill="#4ADE80"/>
                            <path d="M 330 70 Q 350 50 370 70 Q 350 90 330 70" fill="#22C55E"/>
                        </svg>
                        <h5 class="mb-0">Organic HypoSolutions</h5>
                    </div>
                    <p class="small">Utah's premier USDA Certified Organic and EPA registered HOCl sanitization services and products.</p>
                    
                    <!-- Business Info -->
                    <div class="small mb-2">
                        <strong>Business License:</strong> #1565171-0160<br>
                        <strong>Phone:</strong> (801) 712-5663
                    </div>
                    
                    <!-- Certifications -->
                    <div class="mt-3">
                        <span class="badge usda-organic me-1">USDA Organic #Z-699995-2008</span>
                        <span class="badge epa-registered">EPA Reg. #97801-1</span>
                    </div>
                </div>

                <!-- Services -->
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>Services</h6>
                    <ul class="list-unstyled small">
                        <li><a href="../services.html#fogging" class="text-light text-decoration-none">Professional Fogging</a></li>
                        <li><a href="../services.html#commercial" class="text-light text-decoration-none">Commercial Cleaning</a></li>
                        <li><a href="../services.html#residential" class="text-light text-decoration-none">Residential Service</a></li>
                        <li><a href="../calculator.html" class="text-light text-decoration-none">Service Calculator</a></li>
                    </ul>
                </div>

                <!-- Products -->
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>Products</h6>
                    <ul class="list-unstyled small">
                        <li><a href="../products.html#organic" class="text-light text-decoration-none">USDA Organic Line</a></li>
                        <li><a href="../products.html#premium" class="text-light text-decoration-none">EPA Premium Line</a></li>
                        <li><a href="../products.html" class="text-light text-decoration-none">All Products</a></li>
                    </ul>
                    <span class="badge shopify-ready small mt-2">Shopify Ready</span>
                </div>

                <!-- Company -->
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>Company</h6>
                    <ul class="list-unstyled small">
                        <li><a href="../about.html" class="text-light text-decoration-none">About Us</a></li>
                        <li><a href="../science-certifications.html" class="text-light text-decoration-none">Science & Certifications</a></li>
                        <li><a href="../legal-information.html" class="text-light text-decoration-none">Legal Information</a></li>
                        <li><a href="../contact.html" class="text-light text-decoration-none">Contact</a></li>
                    </ul>
                </div>

                <!-- Contact -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <h6>Contact</h6>
                    <div class="small">
                        <div class="mb-2">
                            <i class="fas fa-phone me-2"></i>(801) 712-5663
                        </div>
                        <div class="mb-2">
                            <i class="fas fa-envelope me-2"></i>info@organichyposolutions.com
                        </div>
                        <div class="mb-3">
                            <i class="fas fa-map-marker-alt me-2"></i>Salt Lake City, Utah
                        </div>
                    </div>

                    <!-- Social Media -->
                    <div class="d-flex gap-3">
                        <a href="#" class="text-light">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-light">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-light">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="#" class="text-light">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <hr class="my-4">
            
            <!-- Footer Bottom -->
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0 small">&copy; 2025 Organic HypoSolutions. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div class="small">
                        <a href="../privacy-policy.html" class="text-light text-decoration-none me-3">Privacy Policy</a>
                        <a href="../terms-of-service.html" class="text-light text-decoration-none me-3">Terms of Service</a>
                        <a href="../science-certifications.html" class="text-light text-decoration-none">Certifications</a>
                    </div>
                    <p class="mb-0 small mt-1">This website is for educational purposes only. <a href="../legal-information.html" class="text-light">See Legal Information</a></p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- SHOPIFY-READY CART FUNCTIONALITY -->
    <script>
        // SHOPIFY INTEGRATION CONSTANTS
        const CART_STORAGE_KEY = 'ohsCart';
        const SHOPIFY_DOMAIN = 'organichyposolutions.myshopify.com'; // UPDATE WITH YOUR DOMAIN
        
        // REAL PRODUCT DATA FROM YOUR CATALOG
        const PRODUCT_CATALOG = {
            'ohs-32oz-cleaner': {
                id: 'ohs-32oz-cleaner',
                shopifyHandle: '32oz-organic-ready-to-use-cleaner',
                shopifyProductId: '', // TO BE POPULATED FROM SHOPIFY
                name: '32oz Organic Ready-to-Use Cleaner',
                description: 'USDA Certified Organic hypochlorous acid (HOCl) cleaner for immediate use',
                sku: 'OHS-32OZ-CLEANER',
                weight: 2.2,
                dimensions: '9x3x3 inches',
                category: 'Ready-to-Use Products',
                certifications: ['USDA Organic', 'Health & Safety'],
                pricing: {
                    retail: 21.80,
                    retailSubscription: 20.10, // 8% discount
                    wholesale: 16.13,
                    wholesaleSubscription: 14.85
                },
                wholesaleThreshold: 50,
                minOrder: 500,
                lookupKeys: {
                    retail: 'ohs-32oz-cleaner-retail',
                    retailSub: 'ohs-32oz-cleaner-retail-subscription',
                    wholesale: 'ohs-32oz-cleaner-wholesale',
                    wholesaleSub: 'ohs-32oz-cleaner-wholesale-subscription'
                }
            },
            'premium-wipes': {
                id: 'premium-wipes',
                shopifyHandle: 'professional-disinfecting-wipes',
                shopifyProductId: '',
                name: 'Professional Disinfecting Wipes',
                description: 'EPA registered professional-grade cleaning wipes for commercial use',
                sku: 'HC-WIPES-PRO',
                weight: 1.8,
                certifications: ['EPA Registered', 'Commercial Grade'],
                pricing: {
                    retail: 28.45,
                    retailSubscription: 26.18,
                    wholesale: 24.29,
                    wholesaleSubscription: 22.35
                }
            }
        };

        // SHOPIFY-READY CART OBJECT - EMPTY BY DEFAULT
        let cart = [];

        // TEST FUNCTIONS FOR ADDING DEMO PRODUCTS
        function addDemoProducts() {
            cart = [
                {
                    productId: 'ohs-32oz-cleaner',
                    quantity: 2,
                    priceType: 'retail'
                },
                {
                    productId: 'premium-wipes',
                    quantity: 1,
                    priceType: 'retail'
                }
            ];
            saveCart();
            updateCartDisplay();
            updatePricingSummary();
            showNotification('Demo products added to cart!', 'success');
        }

        // Add demo button to Options dropdown for testing
        window.addDemoProducts = addDemoProducts;

        // UPDATE CART BADGE WITH SHOPIFY INTEGRATION - FIXED
        function updateCartBadge() {
            console.log('🏷️ Updating cart badge for cart:', cart);
            
            try {
                const cartData = JSON.parse(localStorage.getItem(CART_STORAGE_KEY) || JSON.stringify(cart));
                const totalItems = cartData.reduce((sum, item) => sum + (item.quantity || 0), 0);
                
                console.log('🏷️ Total items in cart:', totalItems);
                
                // Update all badge locations
                const badges = ['cartBadge', 'cartBadgeDropdown'];
                badges.forEach(badgeId => {
                    const badge = document.getElementById(badgeId);
                    if (badge) {
                        if (totalItems > 0) {
                            badge.textContent = totalItems;
                            badge.style.display = 'inline-block';
                        } else {
                            badge.style.display = 'none';
                        }
                    }
                });
                
                // Update item count text
                const itemCount = document.getElementById('itemCount');
                if (itemCount) {
                    itemCount.textContent = `${totalItems} items`;
                }
                
                // SHOPIFY INTEGRATION: Sync with Shopify cart
                syncWithShopifyCart(cartData);
                
                console.log('🏷️ Cart badge updated successfully');
                
            } catch (error) {
                console.error('❌ Error updating cart badge:', error);
            }
        }

        // SHOPIFY CART SYNC FUNCTION (READY FOR INTEGRATION)
        function syncWithShopifyCart(cartData) {
            // This function will sync with Shopify Cart API once store is connected
            if (typeof Shopify !== 'undefined' && Shopify.cart) {
                // Shopify integration code will go here
                console.log('Syncing with Shopify cart:', cartData);
            }
        }

        // SHOPIFY-READY PRICING CALCULATION - FIXED
        function calculatePricing(productId, quantity, priceType = 'retail') {
            console.log(`🧮 Calculating pricing for ${productId}, qty: ${quantity}, type: ${priceType}`);
            
            const product = PRODUCT_CATALOG[productId];
            if (!product) {
                console.warn(`⚠️ Product ${productId} not found in catalog`);
                return { unitPrice: 0, totalPrice: 0, savings: 0, discountPercent: 0 };
            }

            let unitPrice = product.pricing[priceType] || product.pricing.retail || 0;
            
            // Volume discount logic based on your pricing sheet
            if (priceType === 'retail' && quantity >= (product.wholesaleThreshold || 50)) {
                unitPrice = product.pricing.wholesale || unitPrice;
                console.log(`🏢 Applied wholesale pricing: ${unitPrice}`);
            }

            const totalPrice = unitPrice * quantity;
            const savings = (product.pricing.retail || 0) - unitPrice;
            const discountPercent = savings > 0 ? ((savings / (product.pricing.retail || 1)) * 100) : 0;
            
            const result = {
                unitPrice: unitPrice,
                totalPrice: totalPrice,
                savings: savings,
                discountPercent: discountPercent.toFixed(1)
            };
            
            console.log(`🧮 Pricing result:`, result);
            return result;
        }

        // SHOPIFY CHECKOUT INTEGRATION
        function proceedToCheckout() {
            // Get order type (one-time, subscription)
            const orderType = document.querySelector('input[name="orderType"]:checked')?.value || 'one-time';
            
            // Prepare cart data for Shopify
            const checkoutData = {
                items: cart.map(item => {
                    const product = PRODUCT_CATALOG[item.productId];
                    return {
                        variant_id: product.shopifyProductId, // Will be populated from Shopify
                        quantity: item.quantity,
                        properties: {
                            'Order Type': orderType,
                            'SKU': product.sku,
                            'Certification': product.certifications.join(', ')
                        }
                    };
                }),
                note: `Order Type: ${orderType}`,
                attributes: {
                    'source': 'website-cart',
                    'order_type': orderType
                }
            };

            // SHOPIFY INTEGRATION POINT
            if (typeof ShopifyBuy !== 'undefined') {
                // Shopify Buy SDK integration will go here
                console.log('Proceeding to Shopify checkout:', checkoutData);
            } else {
                // Fallback for development
                alert(`Shopify checkout ready! Order type: ${orderType}. Total: $${calculateCartTotal()}`);
            }
        }

        // CALCULATE CART TOTAL WITH YOUR PRICING
        function calculateCartTotal() {
            let subtotal = 0;
            cart.forEach(item => {
                const pricing = calculatePricing(item.productId, item.quantity, item.priceType);
                subtotal += pricing.totalPrice;
            });

            const discount = subtotal * 0.15; // 15% volume discount
            const tax = (subtotal - discount) * 0.0775; // Utah tax
            return (subtotal - discount + tax).toFixed(2);
        }

        // UPDATE QUANTITY WITH SHOPIFY SYNC
        function updateQuantity(productId, newQuantity) {
            newQuantity = parseInt(newQuantity);
            if (newQuantity < 0) return;
            
            if (newQuantity === 0) {
                removeItem(productId);
                return;
            }
            
            // Update cart
            cart = cart.map(item => 
                item.productId === productId ? { ...item, quantity: newQuantity } : item
            );
            
            saveCart();
            updateCartDisplay();
            updatePricingSummary();
        }

        // REMOVE ITEM WITH SHOPIFY SYNC
        function removeItem(productId) {
            cart = cart.filter(item => item.productId !== productId);
            saveCart();
            updateCartDisplay();
            updatePricingSummary();
        }

        // ADD TO CART WITH SHOPIFY INTEGRATION - ENHANCED DEBUG
        function addToCart(productId, quantity = 1) {
            console.log(`🛒 Adding to cart: ${productId}, quantity: ${quantity}`);
            
            const product = PRODUCT_CATALOG[productId];
            if (!product) {
                console.error(`❌ Product ${productId} not found in catalog`);
                showNotification(`Product ${productId} not found!`, 'warning');
                return;
            }
            
            const existingItem = cart.find(item => item.productId === productId);
            
            if (existingItem) {
                console.log('🔄 Updating existing item quantity');
                existingItem.quantity += quantity;
            } else {
                console.log('➕ Adding new item to cart');
                cart.push({
                    productId: productId,
                    quantity: quantity,
                    priceType: 'retail'
                });
            }
            
            console.log('🛒 Updated cart:', cart);
            
            saveCart();
            updateCartDisplay();
            updatePricingSummary();
            
            // Show success message
            showNotification(`Added ${product.name} to cart!`, 'success');
        }

        // SAVE CART WITH SHOPIFY SYNC
        function saveCart() {
            localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));
            updateCartBadge();
            
            // Sync with Shopify
            syncWithShopifyCart(cart);
        }

        // UPDATE CART DISPLAY
        function updateCartDisplay() {
            const cartContainer = document.getElementById('cartItems');
            const emptyCart = document.getElementById('emptyCart');
            
            if (cart.length === 0) {
                cartContainer.style.display = 'none';
                emptyCart.style.display = 'block';
                return;
            }
            
            cartContainer.style.display = 'block';
            emptyCart.style.display = 'none';
            
            cartContainer.innerHTML = cart.map(item => {
                const product = PRODUCT_CATALOG[item.productId];
                if (!product) return '';
                
                const pricing = calculatePricing(item.productId, item.quantity, item.priceType);
                const isOrganic = product.certifications.includes('USDA Organic');
                
                return `
                    <div class="cart-item" id="item-${item.productId}" data-shopify-handle="${product.shopifyHandle}">
                        <div class="row align-items-center">
                            <div class="col-md-2">
                                <div class="product-image ${isOrganic ? 'organic' : 'premium'}">
                                    <i class="fas ${isOrganic ? 'fa-leaf' : 'fa-star'}"></i>
                                </div>
                            </div>
                            <div class="col-md-4 product-details">
                                <h6 class="mb-2 fw-bold">${product.name}</h6>
                                <p class="text-muted small mb-2">${product.description}</p>
                                <div class="mb-2">
                                    ${product.certifications.map(cert => {
                                        const certClass = cert.includes('USDA') ? 'usda-organic' : 
                                                         cert.includes('EPA') ? 'epa-registered' : 'health-safety';
                                        return `<span class="certification-badge ${certClass}">${cert}</span>`;
                                    }).join(' ')}
                                </div>
                                <div class="small text-muted">
                                    SKU: ${product.sku} | Weight: ${product.weight} lbs<br>
                                    <span class="badge shopify-ready">Shopify ID: ${product.shopifyProductId || 'Pending'}</span>
                                </div>
                            </div>
                            <div class="col-md-2 text-center">
                                <div class="quantity-controls">
                                    <button class="quantity-btn" onclick="updateQuantity('${item.productId}', ${item.quantity - 1})" 
                                            ${item.quantity <= 1 ? 'disabled' : ''}>
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" class="quantity-input" value="${item.quantity}" min="1" max="100"
                                           onchange="updateQuantity('${item.productId}', this.value)">
                                    <button class="quantity-btn" onclick="updateQuantity('${item.productId}', ${item.quantity + 1})">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-2 text-center">
                                <div class="price-display">${pricing.unitPrice.toFixed(2)}</div>
                                ${product.pricing.retailSubscription ? 
                                    `<div class="subscription-price">Sub: ${product.pricing.retailSubscription.toFixed(2)}</div>` : ''}
                                ${product.pricing.wholesale ? 
                                    `<div class="wholesale-price">Wholesale: ${product.pricing.wholesale.toFixed(2)}</div>` : ''}
                                ${pricing.savings > 0 ? 
                                    `<div class="text-success small">Save ${pricing.discountPercent}%</div>` : ''}
                            </div>
                            <div class="col-md-2 text-center">
                                <div class="price-display">${pricing.totalPrice.toFixed(2)}</div>
                                <button class="btn btn-outline-danger btn-sm mt-2" onclick="removeItem('${item.productId}')">
                                    <i class="fas fa-trash"></i> Remove
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // UPDATE PRICING SUMMARY
        function updatePricingSummary() {
            let subtotal = 0;
            let totalSavings = 0;
            
            cart.forEach(item => {
                const pricing = calculatePricing(item.productId, item.quantity, item.priceType);
                subtotal += pricing.totalPrice;
                totalSavings += pricing.savings * item.quantity;
            });
            
            const volumeDiscount = subtotal * 0.15; // 15% volume discount
            const taxAmount = (subtotal - volumeDiscount) * 0.0775; // Utah tax 7.75%
            const total = subtotal - volumeDiscount + taxAmount;
            
            // Update display
            document.getElementById('subtotal').textContent = `${subtotal.toFixed(2)}`;
            document.getElementById('discount').textContent = `-${volumeDiscount.toFixed(2)}`;
            document.getElementById('tax').textContent = `${taxAmount.toFixed(2)}`;
            document.getElementById('total').textContent = `${total.toFixed(2)}`;
        }

        // CLEAR CART
        function clearCart() {
            if (confirm('Are you sure you want to clear your cart?')) {
                cart = [];
                saveCart();
                updateCartDisplay();
                updatePricingSummary();
                showNotification('Cart cleared successfully!', 'info');
            }
        }

        // SHOPIFY COUPON INTEGRATION
        function applyCoupon() {
            const couponCode = document.getElementById('couponCode').value.trim();
            if (!couponCode) {
                showNotification('Please enter a coupon code', 'warning');
                return;
            }
            
            // SHOPIFY INTEGRATION: Apply discount code
            if (typeof ShopifyBuy !== 'undefined') {
                // Shopify discount API integration will go here
                console.log('Applying Shopify discount code:', couponCode);
            } else {
                // Development fallback
                showNotification(`Coupon "${couponCode}" will be applied at checkout via Shopify`, 'info');
            }
        }

        // UTILITY FUNCTIONS
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `alert alert-${type === 'success' ? 'success' : type === 'warning' ? 'warning' : 'info'} alert-dismissible fade show position-fixed`;
            notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            notification.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        function calculateService() {
            window.open('../calculator.html?source=cart', '_blank');
        }

        function requestQuote() {
            const cartSummary = cart.map(item => {
                const product = PRODUCT_CATALOG[item.productId];
                return `${item.quantity}x ${product.name} (${product.sku})`;
            }).join('\n');
            
            const subject = encodeURIComponent('Quote Request from Cart');
            const body = encodeURIComponent(`Hi, I'd like a quote for the following items:\n\n${cartSummary}\n\nPlease provide pricing for bulk/wholesale quantities.\n\nThank you!`);
            
            window.location.href = `mailto:info@organichyposolutions.com?subject=${subject}&body=${body}`;
        }

        function callToOrder() {
            if (confirm('Call (801) 712-5663 to place your order over the phone?')) {
                window.location.href = 'tel:+18017125663';
            }
        }

        function shareCart() {
            const cartSummary = cart.map(item => {
                const product = PRODUCT_CATALOG[item.productId];
                return `${item.quantity}x ${product.name}`;
            }).join(', ');
            
            const shareText = `Check out these great organic cleaning products: ${cartSummary} - Organic HypoSolutions`;
            const shareUrl = window.location.href;
            
            if (navigator.share) {
                navigator.share({
                    title: 'My Shopping Cart - Organic HypoSolutions',
                    text: shareText,
                    url: shareUrl
                });
            } else {
                navigator.clipboard.writeText(`${shareText} - ${shareUrl}`);
                showNotification('Cart link copied to clipboard!', 'success');
            }
        }

        // SUBSCRIPTION PRICING HANDLER
        document.addEventListener('change', function(e) {
            if (e.target.name === 'orderType') {
                const orderType = e.target.value;
                
                // Update cart items to reflect subscription pricing
                cart.forEach(item => {
                    if (orderType === 'monthly') {
                        item.priceType = 'retailSubscription';
                    } else if (orderType === 'quarterly') {
                        item.priceType = 'retailSubscription'; // Same as monthly for now
                    } else {
                        item.priceType = 'retail';
                    }
                });
                
                updateCartDisplay();
                updatePricingSummary();
                
                // Show savings message
                if (orderType !== 'one-time') {
                    showNotification(`Subscription pricing applied! Save ${orderType === 'monthly' ? '8%' : '10%'}`, 'success');
                }
            }
        });

        // STORAGE EVENT LISTENER (for cross-tab updates)
        window.addEventListener('storage', function(e) {
            if (e.key === CART_STORAGE_KEY) {
                cart = JSON.parse(e.newValue || '[]');
                updateCartDisplay();
                updatePricingSummary();
                updateCartBadge();
            }
        });

        // INITIALIZE ON PAGE LOAD - ENHANCED DEBUG
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Cart page initializing...');
            
            // Load cart from localStorage only
            const storedCart = localStorage.getItem(CART_STORAGE_KEY);
            if (storedCart) {
                try {
                    const parsedCart = JSON.parse(storedCart);
                    cart = parsedCart || [];
                    console.log('📦 Loaded cart from storage:', cart);
                } catch (error) {
                    console.log('❌ Error parsing stored cart, starting with empty cart');
                    cart = [];
                }
            } else {
                // Start with completely empty cart
                cart = [];
                console.log('📭 Starting with empty cart');
            }
            
            console.log('🔍 Product catalog loaded:', Object.keys(PRODUCT_CATALOG));
            console.log('📊 Initial cart state:', cart);
            
            // Update displays immediately
            setTimeout(() => {
                console.log('⚡ Updating displays...');
                updateCartDisplay();
                updatePricingSummary();
                updateCartBadge();
                console.log('✅ All displays updated');
            }, 100);
            
            // SHOPIFY INTEGRATION: Initialize Shopify Buy SDK
            if (typeof ShopifyBuy !== 'undefined') {
                console.log('🛍️ Initializing Shopify integration...');
            } else {
                console.log('⚠️ ShopifyBuy SDK not loaded - running in development mode');
            }
            
            console.log('🎉 Cart initialized successfully!');
            console.log('📋 Available functions:', Object.keys(window.OHSCart || {}));
        });

        // PAGE FOCUS HANDLER
        window.addEventListener('focus', function() {
            updateCartBadge();
        });

        // SHOPIFY WEBHOOK HANDLER (for real-time inventory updates)
        function handleShopifyWebhook(eventType, data) {
            switch(eventType) {
                case 'inventory_update':
                    // Handle inventory changes
                    console.log('Inventory updated:', data);
                    break;
                case 'price_update':
                    // Handle price changes
                    console.log('Prices updated:', data);
                    updateCartDisplay();
                    updatePricingSummary();
                    break;
            }
        }

        // EXPOSE FUNCTIONS FOR SHOPIFY INTEGRATION
        window.OHSCart = {
            addToCart,
            removeItem,
            updateQuantity,
            clearCart,
            proceedToCheckout,
            calculatePricing,
            syncWithShopifyCart,
            handleShopifyWebhook,
            PRODUCT_CATALOG,
            cart
        };

        console.log('🚀 Organic HypoSolutions Cart - Shopify Ready!');
        console.log('📋 Available functions:', Object.keys(window.OHSCart));
        console.log('💰 Pricing structure loaded:', Object.keys(PRODUCT_CATALOG).length, 'products');
    </script>
</body>
</html>
