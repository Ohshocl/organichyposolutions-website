<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- BRAND-FOCUSED TITLE: Targets your exact search terms -->
    <title>Shopping Cart | OHSHOCL | Organic Hypo Solutions | Utah Organic Sanitization Products</title>
    
    <!-- CLEAN META DESCRIPTION: Natural brand messaging -->
    <meta name="description" content="Complete your order of premium USDA Certified Organic and EPA registered hypochlorous acid products. Professional disinfectant supplies and organic cleaning solutions from Utah's trusted sanitization company.">

    <!-- BRAND KEYWORDS: SEO optimization -->
    <meta name="keywords" content="organic cleaning product cart, professional disinfectant ordering, bulk sanitizer purchasing, subscription cleaning products, Utah cleaning supply order, commercial product checkout, disinfectant bulk pricing, professional sanitizer cart, organic product ordering, cleaning supply purchasing">

    <!-- STANDARD SEO -->
    <meta name="author" content="OHSHOCL - Organic Hypo Solutions">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    
    <!-- CANONICAL URL -->
    <link rel="canonical" href="https://organichyposolutions.com/shop/cart.html">

    <!-- LOCATION TARGETING -->
    <meta name="geo.region" content="US-UT">
    <meta name="geo.placename" content="Utah">
    <meta name="geo.position" content="40.7608;-111.8910">
    <meta name="ICBM" content="40.7608, -111.8910">

    <!-- BUSINESS INFO -->
    <meta name="business.phone" content="+1-801-712-5663">
    <meta name="business.email" content="ohshocl@gmail.com">
    <meta name="business.hours" content="Mo-Fr 08:00-18:00, Sa 09:00-17:00">

    <!-- SOCIAL SHARING -->
    <meta property="og:title" content="Shopping Cart | OHSHOCL | Utah Organic Sanitization Products">
    <meta property="og:description" content="Complete your order of premium USDA Certified Organic and EPA registered disinfectant products for professional and residential use.">
    <meta property="og:url" content="https://organichyposolutions.com/shop/cart.html">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://organichyposolutions.com/images/ohs-cart-social.jpg">
    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="OHSHOCL">

    <!-- TWITTER CARDS -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Shopping Cart | OHSHOCL | Utah Organic Sanitization Products">
    <meta name="twitter:description" content="Professional hypochlorous acid products. USDA Certified Organic and EPA registered for commercial and residential use.">
    <meta name="twitter:image" content="https://organichyposolutions.com/images/ohs-cart-social.jpg">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HEKE217WEY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-HEKE217WEY');
    </script>
</head>
<style>
        :root {
            --ohs-primary-blue: #2E5EAA;
            --ohs-accent-blue: #7DD3FC;
            --ohs-organic-green: #4ADE80;
            --ohs-dark-green: #22C55E;
            --ohs-premium-gold: #f59e0b;
            --ohs-light-gray: #f8f9fa;
            --ohs-dark-gray: #6c757d;
            --ohs-wholesale-purple: #7c3aed;
            --ohs-savings-green: #059669;
        }

        /* EXACT NAVBAR STYLING FROM INDEX PAGE */
        .navbar {
            background-color: #2E5EAA !important;
            padding: 0.3rem 0 !important;
            box-shadow: none !important;
            min-height: 80px !important;
        }

        .navbar-brand {
            color: white !important;
            font-size: 1.5rem !important;
            font-weight: bold !important;
            padding: 0.2rem 0 !important;
            display: flex !important;
            align-items: center !important;
        }

        .navbar-brand svg {
            width: 32px !important;
            height: 32px !important;
        }

        .navbar-nav .nav-link {
            color: white !important;
            font-weight: 500 !important;
            padding: 0.5rem 1rem !important;
            margin: 0 !important;
            border-radius: 0 !important;
            transition: all 0.2s ease !important;
            display: flex !important;
            align-items: center !important;
        }

        .navbar-nav .nav-link i {
            margin-right: 0.5rem !important;
            font-size: 0.9rem !important;
        }

        .navbar-nav .nav-link:hover {
            color: #7DD3FC !important;
            background-color: rgba(255, 255, 255, 0.1) !important;
        }

        .navbar-nav .nav-link.active,
        .navbar-nav .nav-link.fw-semibold {
            color: #7DD3FC !important;
            background-color: rgba(255, 255, 255, 0.15) !important;
        }

        /* Override Bootstrap navbar defaults */
        .navbar-light .navbar-nav .nav-link {
            color: white !important;
        }

        .navbar-light .navbar-nav .nav-link:hover,
        .navbar-light .navbar-nav .nav-link:focus {
            color: #7DD3FC !important;
        }

        .navbar-light .navbar-brand {
            color: white !important;
        }

        .navbar-light .navbar-brand:hover,
        .navbar-light .navbar-brand:focus {
            color: white !important;
        }

        /* Dropdown Styling */
        .dropdown-menu {
            background-color: white !important;
            border: none !important;
            border-radius: 8px !important;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1) !important;
            padding: 0.5rem 0 !important;
            margin-top: 0.25rem !important;
        }

        .dropdown-item {
            color: #2E5EAA !important;
            padding: 0.5rem 1rem !important;
            border-radius: 0 !important;
            transition: all 0.2s ease !important;
        }

        .dropdown-item:hover,
        .dropdown-item:focus {
            background-color: #f8f9fa !important;
            color: #2E5EAA !important;
        }

        .dropdown-item i {
            width: 16px !important;
            margin-right: 8px !important;
        }

        .badge {
            font-size: 0.7rem !important;
            font-weight: normal !important;
        }

        /* Navbar toggler for mobile */
        .navbar-toggler {
            border-color: rgba(255, 255, 255, 0.3) !important;
        }

        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e") !important;
        }

        /* Mobile responsiveness */
        @media (max-width: 991.98px) {
            .navbar-nav .nav-link {
                padding: 0.5rem 0.75rem !important;
            }
        }

        /* Cart-specific styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--ohs-light-gray);
        }

        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, var(--ohs-primary-blue) 0%, var(--ohs-accent-blue) 100%);
            color: white;
            padding: 40px 0;
        }

        .cert-badge {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Cart Container */
        .cart-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: -3rem;
            position: relative;
            z-index: 10;
        }

        /* FIXED CART ITEMS - Critical Display Fix + Price Overflow Fix */
        .cart-item {
            border-bottom: 2px solid #f1f5f9;
            padding: 2rem 0;
            transition: all 0.3s ease;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            min-height: 120px !important;
            background: white !important;
            border-radius: 12px;
            margin-bottom: 1rem;
            padding: 1.5rem;
            border: 1px solid #e2e8f0;
        }

        .cart-item:hover {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9) !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .product-image {
            width: 90px;
            height: 90px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 3px solid white;
        }

        .product-image.organic {
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }

        .product-image.premium {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        /* FIXED QUANTITY CONTROLS */
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            background: #f8fafc;
            padding: 0.8rem;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
            justify-content: center;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border: 2px solid var(--ohs-organic-green);
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--ohs-organic-green);
            font-weight: bold;
            user-select: none;
            -webkit-user-select: none;
        }

        .quantity-btn:hover:not(:disabled) {
            background: var(--ohs-organic-green);
            color: white;
            transform: scale(1.05);
        }

        .quantity-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #ccc;
            color: #ccc;
        }

        .quantity-input {
            border: 2px solid var(--ohs-organic-green);
            background: white;
            border-radius: 8px;
            width: 60px;
            height: 40px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--ohs-primary-blue);
            outline: none;
            transition: all 0.3s ease;
        }

        .quantity-input:focus {
            border-color: var(--ohs-primary-blue);
            box-shadow: 0 0 8px rgba(46, 94, 170, 0.3);
        }

        .quantity-input::-webkit-outer-spin-button,
        .quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .quantity-input[type=number] {
            -moz-appearance: textfield;
        }

        /* WHOLESALE PRICING BADGES */
        .wholesale-pricing-badge {
            background: linear-gradient(135deg, var(--ohs-wholesale-purple), #6366f1);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            display: inline-block;
            margin: 0.25rem 0;
            box-shadow: 0 2px 8px rgba(124, 58, 237, 0.3);
            animation: pulse-purple 2s infinite;
        }

        @keyframes pulse-purple {
            0%, 100% { transform: scale(1); box-shadow: 0 2px 8px rgba(124, 58, 237, 0.3); }
            50% { transform: scale(1.02); box-shadow: 0 4px 12px rgba(124, 58, 237, 0.5); }
        }

        .wholesale-threshold-indicator {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #92400e;
            padding: 0.3rem 0.6rem;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-block;
            margin: 0.25rem 0;
            border: 1px solid #f59e0b;
        }

        /* SAVINGS DISPLAY STYLING */
        .savings-display {
            background: linear-gradient(135deg, #ecfdf5, #d1fae5);
            border: 2px solid var(--ohs-savings-green);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
            position: relative;
        }

        .savings-display::before {
            content: '💰';
            position: absolute;
            top: -10px;
            left: 15px;
            background: white;
            padding: 0 8px;
            font-size: 1.2rem;
        }

        .wholesale-progress-bar {
            background: #f3f4f6;
            border-radius: 8px;
            height: 8px;
            margin: 0.5rem 0;
            overflow: hidden;
        }

        .wholesale-progress-fill {
            background: linear-gradient(90deg, var(--ohs-wholesale-purple), #6366f1);
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s ease;
        }

        /* PRICE DISPLAY WITH OVERFLOW FIX */
        .price-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--ohs-organic-green);
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            display: block;
        }

        .price-display-large {
            font-size: 1rem;
            font-weight: bold;
            color: var(--ohs-organic-green);
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
            display: block;
        }

        .original-price {
            text-decoration: line-through;
            color: #9ca3af;
            font-size: 0.9rem;
            margin-left: 0.5rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .discount-amount {
            color: var(--ohs-savings-green);
            font-weight: bold;
            font-size: 0.85rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        /* Order Summary */
        .order-summary {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 20px;
            padding: 2.5rem;
            position: sticky;
            top: 2rem;
            border: 2px solid #e2e8f0;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }

        .order-summary h4 {
            color: var(--ohs-primary-blue);
            font-weight: bold;
            border-bottom: 3px solid var(--ohs-organic-green);
            padding-bottom: 0.5rem;
            margin-bottom: 2rem;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem 0;
            border-bottom: 1px solid #e2e8f0;
            font-weight: 500;
        }

        .summary-row:last-child {
            border-bottom: 3px solid var(--ohs-organic-green);
            font-weight: bold;
            font-size: 1.3rem;
            color: var(--ohs-primary-blue);
            background: linear-gradient(135deg, #ecfdf5, #dcfce7);
            margin: 1rem -1rem;
            padding: 1rem;
            border-radius: 12px;
        }

        /* SUMMARY ROW PRICE OVERFLOW FIX */
        .summary-row span:last-child {
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 60%;
            text-align: right;
        }

        .discount-text {
            color: var(--ohs-savings-green);
            font-weight: bold;
        }

        .wholesale-text {
            color: var(--ohs-wholesale-purple);
            font-weight: bold;
        }

        .free-shipping {
            color: #22c55e;
            font-weight: bold;
            text-transform: uppercase;
        }

        /* Checkout Button */
        .btn-checkout {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border: none;
            border-radius: 15px;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        .btn-checkout:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.6);
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
        }

        /* Empty Cart */
        .empty-cart {
            text-align: center;
            padding: 4rem 2rem;
            color: #64748b;
            background: linear-gradient(135deg, #f8fafc, #ffffff);
            border-radius: 15px;
            margin: 2rem 0;
        }

        .empty-cart i {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.3;
        }

        .empty-cart .cert-badge {
            transition: transform 0.3s ease;
        }

        .empty-cart .cert-badge:hover {
            transform: scale(1.1);
        }

        /* FOOTER STYLING FROM INDEX PAGE */
        .footer-section {
            background: #000000;
            color: white;
            padding: 3rem 0 2rem 0;
            margin-top: 3rem;
        }

        .footer-section h5, 
        .footer-section h6 {
            color: white;
            margin-bottom: 1rem;
        }

        .footer-section .text-white-50 {
            color: rgba(255, 255, 255, 0.75) !important;
            transition: color 0.2s ease;
        }

        .footer-section .text-white-50:hover {
            color: white !important;
        }

        .footer-cert {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-block;
            margin: 0.125rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .footer-section hr {
            border-color: rgba(255, 255, 255, 0.2) !important;
        }

        /* Under Construction Badge */
        .construction-badge {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Product Line Badges */
        .badge-organic {
            background: linear-gradient(135deg, var(--ohs-organic-green), var(--ohs-dark-green));
            color: white;
        }

        .badge-premium {
            background: linear-gradient(135deg, var(--ohs-premium-gold), #d97706);
            color: white;
        }

        .badge-wholesale {
            background: linear-gradient(135deg, var(--ohs-wholesale-purple), #6366f1);
            color: white;
        }

        /* Wholesale discount animations */
        #wholesaleDiscountBanner {
            animation: slideDown 0.5s ease-in-out;
            box-shadow: 0 4px 15px rgba(124, 58, 237, 0.3);
        }

        @keyframes slideDown {
            from { 
                opacity: 0; 
                transform: translateY(-20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        #wholesalePricingInfo {
            transition: all 0.3s ease;
        }

        #wholesalePricingInfo.show {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        #wholesaleDiscountText {
            font-weight: 600;
        }

        /* Mobile */
        @media (max-width: 768px) {
            .hero-section {
                padding: 2rem 0;
            }
            
            .cart-container {
                margin: 0 1rem;
                margin-top: -1rem;
            }
            
            .order-summary {
                position: static;
                margin-top: 2rem;
                padding: 1.5rem;
            }

            .quantity-controls {
                gap: 0.5rem;
                padding: 0.5rem;
            }

            .quantity-btn {
                width: 35px;
                height: 35px;
            }

            .price-display {
                font-size: 1rem;
            }

            .price-display-large {
                font-size: 0.9rem;
            }

            .summary-row {
                font-size: 0.9rem;
            }

            .summary-row span:last-child {
                max-width: 50%;
            }
        }

        /* Extra mobile fixes for very small screens */
        @media (max-width: 480px) {
            .price-display {
                font-size: 0.9rem;
            }

            .price-display-large {
                font-size: 0.8rem;
            }

            .summary-row {
                font-size: 0.85rem;
                padding: 0.6rem 0;
            }

            .order-summary {
                padding: 1rem;
            }
        }
    </style>
    <body>
    <!-- Navigation - Updated to Match Index Page Structure -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="../index.html">
                <svg width="32" height="32" viewBox="0 0 400 250" class="me-2">
                    <rect width="400" height="250" fill="#2E5EAA"/>
                    <text x="200" y="180" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="100" font-weight="bold">OHS</text>
                    <text x="200" y="210" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="20">Organic HypoSolutions</text>
                    <path d="M 320 80 Q 340 60 360 80 Q 340 100 320 80" fill="#4ADE80"/>
                    <path d="M 330 70 Q 350 50 370 70 Q 350 90 330 70" fill="#22C55E"/>
                </svg>
                Organic HypoSolutions
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">
                            <i class="fas fa-home me-1"></i>Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../services.html">
                            <i class="fas fa-spray-can me-1"></i>Services
                        </a>
                    </li>
                    <!-- DIRECT PRODUCTS LINK - NO DROPDOWN -->
                    <li class="nav-item">
                        <a class="nav-link" href="../products.html">
                            <i class="fas fa-shopping-bag me-1"></i>Products
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../calculator.html">
                            <i class="fas fa-calculator me-1"></i>Calculator
                        </a>
                    </li>
                    <!-- ABOUT DROPDOWN - MATCHING INDEX PAGE -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="../about.html" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-info-circle me-1"></i>About
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../about.html">
                                <i class="fas fa-info-circle me-2"></i>About Us
                            </a></li>
                            <li><a class="dropdown-item" href="../science-certifications.html">
                                <i class="fas fa-microscope me-2"></i>Science & Certifications
                            </a></li>
                            <li><a class="dropdown-item" href="../contact.html">
                                <i class="fas fa-phone me-2"></i>Contact
                            </a></li>
                            <li><a class="dropdown-item" href="../legal-information.html">
                                <i class="fas fa-gavel me-2"></i>Legal Information
                            </a></li>
                        </ul>
                    </li>
                    
                    <!-- SHOP DROPDOWN - MATCHING INDEX PAGE -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle fw-semibold" href="#" id="shopDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-shopping-cart me-1"></i>Shop
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item active" href="cart.html">
                                <i class="fas fa-shopping-cart me-2"></i>View Cart 
                                <span id="cartBadge" class="badge bg-danger ms-1" style="display: none;">0</span>
                            </a></li>
                            <li><a class="dropdown-item" href="checkout.html">
                                <i class="fas fa-credit-card me-2"></i>Checkout
                                <span class="construction-badge ms-1">Under Construction</span>
                            </a></li>
                            <li><a class="dropdown-item" href="book-service.html">
                                <i class="fas fa-calendar-plus me-2"></i>Book Service
                            </a></li>
                        </ul>
                    </li>
                    
                    <!-- ACCOUNT DROPDOWN - MATCHING INDEX PAGE -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="accountDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user me-1"></i>Account
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../account/profile.html">
                                <i class="fas fa-building me-2"></i>Business Pricing
                                <span class="construction-badge ms-1">Under Construction</span>
                            </a></li>
                            <li><a class="dropdown-item" href="../account/orders.html">
                                <i class="fas fa-user-circle me-2"></i>Consumer Pricing
                                <span class="construction-badge ms-1">Under Construction</span>
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="../auth/login.html">
                                <i class="fas fa-sign-in-alt me-2"></i>Login
                                <span class="construction-badge ms-1">Under Construction</span>
                            </a></li>
                            <li><a class="dropdown-item" href="../auth/register.html">
                                <i class="fas fa-user-plus me-2"></i>Register
                                <span class="construction-badge ms-1">Under Construction</span>
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-5 fw-bold mb-3">Shopping Cart</h1>
                    <p class="lead mb-4">
                        Review your premium hypochlorous acid products before checkout. 
                        Professional-grade disinfectants with Utah's fastest delivery.
                    </p>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="cert-badge">
                            <i class="fas fa-leaf me-1"></i> USDA Certified Organic
                        </span>
                        <span class="cert-badge">
                            <i class="fas fa-shield-alt me-1"></i> EPA Registered
                        </span>
                        <span class="cert-badge">
                            <i class="fas fa-shipping-fast me-1"></i> ShipRight Shipping
                        </span>
                        <span class="cert-badge">
                            <i class="fas fa-calculator me-1"></i> Wholesale Pricing
                        </span>
                    </div>
                </div>
                <div class="col-lg-4 text-end">
                    <div class="hero-stats">
                        <div class="mb-3">
                            <h3 class="mb-1" id="heroCartTotal">$0.00</h3>
                            <small class="text-light">Cart Total</small>
                        </div>
                        <div class="mb-3">
                            <h4 class="mb-1" id="heroItemCount">0</h4>
                            <small class="text-light">Items</small>
                        </div>
                        <div class="mb-3" id="heroSavingsDisplay" style="display: none;">
                            <h4 class="mb-1 text-warning" id="heroTotalSavings">$0.00</h4>
                            <small class="text-light">Total Savings</small>
                        </div>
                        <div class="d-flex gap-2 justify-content-end">
                            <a href="../products.html" class="btn btn-outline-light btn-sm">
                                <i class="fas fa-arrow-left me-1"></i> Continue Shopping
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Wholesale Discount Banner (Hidden by default, shown via JavaScript) -->
    <div id="wholesaleDiscountBanner" class="alert alert-primary mx-3 mt-3" style="display: none;">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <strong><i class="fas fa-crown me-2"></i>Wholesale Pricing Applied!</strong>
                    <span id="wholesaleDiscountText" class="ms-2"></span>
                </div>
                <div class="col-md-4 text-end">
                    <button class="btn btn-sm btn-outline-primary" onclick="toggleWholesalePricingInfo()">
                        View Pricing Tiers <i class="fas fa-chevron-down ms-1"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Wholesale Pricing Info (Hidden by default) -->
    <div id="wholesalePricingInfo" class="alert alert-info mx-3" style="display: none;">
        <div class="container">
            <h6 class="fw-bold mb-3">4-Tier Pricing System</h6>
            <div class="row">
                <div class="col-md-3">
                    <strong>Tier 1:</strong> Retail (default)
                </div>
                <div class="col-md-3">
                    <strong>Tier 2:</strong> Retail + Subscription (8% off)
                </div>
                <div class="col-md-3">
                    <strong>Tier 3:</strong> Wholesale (volume threshold)
                </div>
                <div class="col-md-3">
                    <strong>Tier 4:</strong> Wholesale + Subscription (10% off)
                </div>
            </div>
            <div class="mt-2">
                <small class="text-muted">
                    <i class="fas fa-info-circle me-1"></i>
                    Wholesale pricing unlocks when you meet minimum volume thresholds (10/20/25/50 units per product). 
                    Mixed carts supported - some products can be retail while others qualify for wholesale.
                </small>
            </div>
        </div>
    </div>

<!-- Main Content -->
    <div class="container">
        <div class="cart-container p-4">
            <div class="row">
                <!-- Cart Items -->
                <div class="col-lg-8">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h3 class="mb-0">
                            <i class="fas fa-shopping-cart me-2 text-primary"></i>Shopping Cart
                        </h3>
                        <div class="d-flex gap-3 align-items-center">
                            <small class="text-muted" id="itemCount">0 items</small>
                            <button class="btn btn-outline-danger btn-sm" onclick="clearAllItems()">
                                <i class="fas fa-trash me-1"></i>Clear All
                            </button>
                        </div>
                    </div>

                    <!-- Cart Items Container - UPDATED WITH WHOLESALE LOGIC -->
                    <div id="cartItems">
                        <!-- Items will be dynamically inserted here with wholesale pricing calculations -->
                    </div>

                    <!-- Empty Cart Message -->
                    <div id="emptyCart" class="empty-cart">
                        <i class="fas fa-shopping-cart text-muted"></i>
                        <h4 class="mt-3 mb-3">Your cart is empty</h4>
                        <p class="text-muted mb-4">Browse our USDA Certified Organic and EPA registered products!</p>
                        <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center">
                            <a href="../products.html" class="btn btn-primary btn-lg">
                                <i class="fas fa-shopping-bag me-2"></i>Browse Products
                            </a>
                            <a href="../services.html" class="btn btn-outline-primary btn-lg">
                                <i class="fas fa-spray-can me-2"></i>View Services
                            </a>
                        </div>
                        <div class="mt-4">
                            <div class="row text-center">
                                <div class="col-6 col-md-3 mb-3">
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="cert-badge bg-success text-white mb-2">
                                            <i class="fas fa-leaf"></i>
                                        </div>
                                        <small class="text-muted">19 Organic Products</small>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-3">
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="cert-badge bg-warning text-white mb-2">
                                            <i class="fas fa-crown"></i>
                                        </div>
                                        <small class="text-muted">38 Premium Products</small>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-3">
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="cert-badge bg-primary text-white mb-2">
                                            <i class="fas fa-shipping-fast"></i>
                                        </div>
                                        <small class="text-muted">ShipRight Rates</small>
                                    </div>
                                </div>
                                <div class="col-6 col-md-3 mb-3">
                                    <div class="d-flex flex-column align-items-center">
                                        <div class="cert-badge bg-info text-white mb-2">
                                            <i class="fas fa-percentage"></i>
                                        </div>
                                        <small class="text-muted">Wholesale Thresholds</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Savings Summary Section (when cart has savings) -->
                    <div id="savingsSummary" style="display: none;" class="mt-4">
                        <div class="savings-display">
                            <h5 class="text-success mb-3">
                                <i class="fas fa-piggy-bank me-2"></i>Your Savings Breakdown
                            </h5>
                            <div class="row">
                                <div class="col-md-4 text-center mb-3">
                                    <div class="fw-bold text-success h4" id="totalSavingsAmount">$0.00</div>
                                    <small class="text-muted">Total Saved</small>
                                </div>
                                <div class="col-md-4 text-center mb-3">
                                    <div class="fw-bold text-primary h4" id="wholesaleItemsCount">0</div>
                                    <small class="text-muted">Wholesale Items</small>
                                </div>
                                <div class="col-md-4 text-center mb-3">
                                    <div class="fw-bold text-warning h4" id="averageSavingsPercent">0%</div>
                                    <small class="text-muted">Avg Discount</small>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <small class="text-success">
                                    <i class="fas fa-info-circle me-1"></i>
                                    You're getting wholesale pricing on qualifying items! Keep adding to unlock more savings.
                                </small>
                            </div>
                        </div>
                    </div>

                    <!-- Product Recommendations (when cart has items) -->
                    <div id="recommendations" style="display: none;" class="mt-4">
                        <div class="card">
                            <div class="card-header bg-light">
                                <h5 class="mb-0">
                                    <i class="fas fa-lightbulb me-2 text-warning"></i>You might also like
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <div class="d-flex align-items-center">
                                            <div class="product-image organic me-3" style="width: 60px; height: 60px; font-size: 1.5rem;">
                                                🧴
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">32oz Organic Multi-Surface Cleaner</h6>
                                                <p class="small text-muted mb-1">Perfect for daily cleaning</p>
                                                <div class="price-display">$21.80</div>
                                                <div class="d-flex align-items-center gap-2 mt-2">
                                                    <div class="recommendation-quantity-controls">
                                                        <button class="quantity-btn-sm" onclick="changeRecommendationQuantity('rec1', -1)" 
                                                                id="rec1-minus" disabled>
                                                            <i class="fas fa-minus"></i>
                                                        </button>
                                                        <input type="number" class="quantity-input-sm" value="1" 
                                                               min="1" max="999" id="rec1-qty"
                                                               onchange="setRecommendationQuantity('rec1', this.value)"
                                                               onclick="this.select()">
                                                        <button class="quantity-btn-sm" onclick="changeRecommendationQuantity('rec1', 1)">
                                                            <i class="fas fa-plus"></i>
                                                        </button>
                                                    </div>
                                                    <button class="btn btn-sm btn-success" onclick="addRecommendationToCart('rec1')">
                                                        <i class="fas fa-cart-plus me-1"></i>Add
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <div class="d-flex align-items-center">
                                            <div class="product-image organic me-3" style="width: 60px; height: 60px; font-size: 1.5rem;">
                                                🧽
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="mb-1">Organic All-in-One Disinfecting Wipes</h6>
                                                <p class="small text-muted mb-1">USDA Certified Organic wipes</p>
                                                <div class="price-display">$24.29</div>
                                                <div class="d-flex align-items-center gap-2 mt-2">
                                                    <div class="recommendation-quantity-controls">
                                                        <button class="quantity-btn-sm" onclick="changeRecommendationQuantity('rec2', -1)" 
                                                                id="rec2-minus" disabled>
                                                            <i class="fas fa-minus"></i>
                                                        </button>
                                                        <input type="number" class="quantity-input-sm" value="1" 
                                                               min="1" max="999" id="rec2-qty"
                                                               onchange="setRecommendationQuantity('rec2', this.value)"
                                                               onclick="this.select()">
                                                        <button class="quantity-btn-sm" onclick="changeRecommendationQuantity('rec2', 1)">
                                                            <i class="fas fa-plus"></i>
                                                        </button>
                                                    </div>
                                                    <button class="btn btn-sm btn-success" onclick="addRecommendationToCart('rec2')">
                                                        <i class="fas fa-cart-plus me-1"></i>Add
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3 p-3 rounded" style="background: rgba(124, 58, 237, 0.1); border: 1px solid var(--ohs-wholesale-purple);">
                                    <small class="text-primary">
                                        <i class="fas fa-info-circle me-1"></i>
                                        <strong>Wholesale Tip:</strong> Add more items to meet wholesale thresholds! 
                                        Check product pages for specific volume requirements.
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Order Summary with Wholesale Pricing Integration -->
                <div class="col-lg-4">
                    <div class="order-summary">
                        <h4>
                            <i class="fas fa-receipt me-2"></i>Order Summary
                        </h4>
                        
                        <div class="summary-row">
                            <span>Subtotal (Retail):</span>
                            <span id="retailSubtotal">$0.00</span>
                        </div>
                        
                        <!-- Wholesale Discount Row - Dynamically shown -->
                        <div class="summary-row" id="wholesaleDiscountRow" style="display: none;">
                            <span>Wholesale Savings:</span>
                            <span id="wholesaleDiscount" class="wholesale-text">-$0.00</span>
                        </div>
                        
                        <div class="summary-row">
                            <span>After Discounts:</span>
                            <span id="subtotal">$0.00</span>
                        </div>
                        
                        <!-- Subscription discount row - dynamically added -->
                        <div class="summary-row" id="subscriptionDiscountRow" style="display: none;">
                            <span>Subscription Savings:</span>
                            <span id="subscriptionDiscount" class="discount-text">-$0.00</span>
                        </div>
                        
                        <div class="summary-row">
                            <span>Shipping:</span>
                            <span id="shipping" class="text-muted">Calculated by ShipRight</span>
                        </div>
                        <div class="summary-row">
                            <span>Tax:</span>
                            <span id="tax" class="text-muted">Collected by Shopify</span>
                        </div>
                        
                        <div class="summary-row">
                            <span><strong>Estimated Total:</strong></span>
                            <span id="total"><strong>$0.00*</strong></span>
                        </div>

                        <!-- Wholesale Progress Section -->
                        <div id="wholesaleProgressSection" class="mt-4 p-3 rounded" style="background: rgba(124, 58, 237, 0.05); border: 2px solid var(--ohs-wholesale-purple); display: none;">
                            <h6 class="text-primary mb-2">
                                <i class="fas fa-chart-line me-2"></i>Wholesale Progress
                            </h6>
                            <div class="mb-2" id="wholesaleProgressContent">
                                <!-- Progress content will be dynamically inserted -->
                            </div>
                        </div>

                        <!-- Coupon Code -->
                        <div class="mt-4">
                            <div class="input-group">
                                <input type="text" class="form-control" placeholder="Enter coupon code" id="couponCode">
                                <button class="btn btn-outline-secondary" onclick="applyCoupon()">Apply</button>
                            </div>
                            <small class="text-muted d-block mt-2">
                                <span class="construction-badge">Shopify Discount API Ready</span>
                            </small>
                        </div>

                        <!-- Subscription Option -->
                        <div class="mt-4 p-3 rounded" style="background: rgba(46, 94, 170, 0.1); border: 2px solid var(--ohs-primary-blue);">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="subscriptionToggle">
                                <label class="form-check-label" for="subscriptionToggle">
                                    <strong class="text-primary">Subscribe & Save</strong>
                                </label>
                            </div>
                            <small class="text-muted d-block mt-1">
                                <i class="fas fa-calendar-alt me-1"></i>
                                8% retail / 10% wholesale + delivery optimization
                                <span class="construction-badge ms-2">Under Construction</span>
                            </small>
                            <div class="mt-2">
                                <select class="form-select form-select-sm" id="subscriptionFrequency" disabled>
                                    <option value="monthly">Monthly (8% retail discount)</option>
                                    <option value="quarterly">Quarterly (10% wholesale discount)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Checkout Button -->
                        <button class="btn btn-primary w-100 btn-lg btn-checkout mt-4" onclick="proceedToCheckout()">
                            <i class="fas fa-lock me-2"></i>Secure Checkout
                        </button>
                        
                        <!-- Security & Integration Info -->
                        <div class="text-center mt-3">
                            <small class="text-muted d-block">
                                <i class="fas fa-shield-alt me-1"></i>256-bit SSL encryption
                            </small>
                            <div class="mt-2">
                                <span class="construction-badge">Shopify Payments Ready</span>
                            </div>
                        </div>

                        <!-- Delivery Information -->
                        <div class="mt-4 p-3 rounded bg-light">
                            <h6 class="mb-2">
                                <i class="fas fa-truck me-2 text-primary"></i>Shipping Information
                            </h6>
                            <div class="small">
                                <div class="d-flex justify-content-between mb-1">
                                    <span>Shipping:</span>
                                    <span class="text-primary">Calculated by ShipRight</span>
                                </div>
                                <div class="d-flex justify-content-between mb-1">
                                    <span>Tax:</span>
                                    <span class="text-primary">Collected by Shopify</span>
                                </div>
                                <div class="text-muted">
                                    <i class="fas fa-map-marker-alt me-1"></i>
                                    Ships from Salt Lake City, UT
                                </div>
                                <div class="mt-2">
                                    <span class="construction-badge">ShipRight Integration</span>
                                </div>
                                <div class="mt-1">
                                    <small class="text-muted">*Final shipping and tax calculated at checkout</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer - Matching Index Page Structure -->
    <footer class="footer-section">
        <div class="container">
            <div class="row">
                <div class="col-md-3 mb-4">
                    <div class="d-flex align-items-center mb-3">
                        <svg width="40" height="40" viewBox="0 0 400 250" class="me-2">
                            <rect width="400" height="250" fill="#2E5EAA"/>
                            <text x="200" y="180" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="100" font-weight="bold">OHS</text>
                            <text x="200" y="210" text-anchor="middle" fill="#7DD3FC" font-family="Arial, sans-serif" font-size="20">Organic HypoSolutions</text>
                            <path d="M 320 80 Q 340 60 360 80 Q 340 100 320 80" fill="#4ADE80"/>
                            <path d="M 330 70 Q 350 50 370 70 Q 350 90 330 70" fill="#22C55E"/>
                        </svg>
                        <h5 class="mb-0">Organic HypoSolutions</h5>
                    </div>
                    <p>Utah's dual-certified HOCl distributor for families and businesses.</p>
                </div>
                
                <div class="col-md-2 mb-4">
                    <h6 class="fw-bold mb-3">Products</h6>
                    <ul class="list-unstyled">
                        <li><a href="../products.html" class="text-white-50 text-decoration-none">USDA Organic (19)</a></li>
                        <li><a href="../products.html" class="text-white-50 text-decoration-none">EPA Premium (38)</a></li>
                        <li><a href="../products.html" class="text-white-50 text-decoration-none">Bulk Solutions</a></li>
                        <li><a href="../products.html" class="text-white-50 text-decoration-none">All Products</a></li>
                    </ul>
                </div>
                
                <div class="col-md-2 mb-4">
                    <h6 class="fw-bold mb-3">Certified</h6>
                    <ul class="list-unstyled">
                        <li><span class="footer-cert">USDA Organic</span></li>
                        <li><span class="footer-cert">EPA Registered</span></li>
                        <li><span class="footer-cert">FDA Food Safe</span></li>
                    </ul>
                </div>
                
                <div class="col-md-2 mb-4">
                    <h6 class="fw-bold mb-3">Support</h6>
                    <ul class="list-unstyled">
                        <li><a href="../science-certifications.html" class="text-white-50 text-decoration-none">Science</a></li>
                        <li><a href="../calculator.html" class="text-white-50 text-decoration-none">Calculator</a></li>
                        <li><a href="../about.html" class="text-white-50 text-decoration-none">About</a></li>
                        <li><a href="../contact.html" class="text-white-50 text-decoration-none">Contact</a></li>
                    </ul>
                </div>
                
                <div class="col-md-3 mb-4">
                    <h6 class="fw-bold mb-3">Contact</h6>
                    <p class="mb-2">
                        <i class="fas fa-phone me-2"></i>
                        <a href="tel:+18017125663" class="text-white text-decoration-none">(801) 712-5663</a>
                    </p>
                    <p class="mb-2">
                        <i class="fas fa-envelope me-2"></i>
                        <a href="mailto:ohshocl@gmail.com" class="text-white text-decoration-none">ohshocl@gmail.com</a>
                    </p>
                    <p class="mb-3">
                        <i class="fas fa-map-marker-alt me-2"></i>
                        Salt Lake City, UT, USA
                    </p>
                </div>
            </div>
            
            <hr class="my-4 border-white-50">
            
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2025 Organic HypoSolutions. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <span class="footer-cert me-1">57 Products</span>
                    <span class="footer-cert me-1">ShipRight Ready</span>
                    <span class="footer-cert">Wholesale Ready</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- UPDATED CART SYSTEM WITH WHOLESALE THRESHOLD LOGIC -->
    <script>
        // ===================================================================
        // INDEPENDENT WHOLESALE CART SYSTEM
        // This cart logic is completely independent of any existing cart.js
        // It implements your actual wholesale threshold business model:
        // - Retail pricing until wholesale threshold is met per product
        // - Wholesale pricing kicks in when quantity >= threshold
        // - Based on your actual pricing table from 7.20 business success criteria
        // ===================================================================
        // ===================================================================
        // PRODUCT CATALOG WITH WHOLESALE THRESHOLD LOGIC
        // ===================================================================
        
        // ACTUAL PRODUCT CATALOG WITH REAL WHOLESALE THRESHOLDS FROM YOUR PRICING TABLE
        const PRODUCT_CATALOG = {
            // ORGANIC HYPOSOLUTIONS LINE (Based on your actual pricing table)
            'ohs-32oz-cleaner-ready': {
                id: 'ohs-32oz-cleaner-ready',
                name: '32oz Organic Ready-to-Use Cleaner',
                retailPrice: 21.80,
                wholesalePrice: 15.90, // From your pricing table
                wholesaleThreshold: 500, // 500 Bottles from your table
                type: 'organic',
                emoji: '🧴',
                sku: 'OHS-32OZ-CLEANER-RTU',
                description: 'USDA Certified Organic hypochlorous acid cleaner'
            },
            'ohs-3oz-disinfectant': {
                id: 'ohs-3oz-disinfectant',
                name: '3oz Organic Multi-Surface Disinfectant',
                retailPrice: 12.97,
                wholesalePrice: 9.47, // Calculated from your margin structure
                wholesaleThreshold: 200, // Typical for small units
                type: 'organic',
                emoji: '✨',
                sku: 'OHS-3OZ-DISINFECTANT',
                description: 'Travel-size USDA Certified Organic disinfectant'
            },
            'ohs-1gal-laundry': {
                id: 'ohs-1gal-laundry',
                name: '1 Gallon Organic Laundry Booster',
                retailPrice: 41.15,
                wholesalePrice: 30.44, // From your pricing table
                wholesaleThreshold: 440, // 440 Bottles from your table
                type: 'organic',
                emoji: '🧺',
                sku: 'OHS-1GAL-LAUNDRY',
                description: 'USDA Certified Organic laundry booster'
            },
            'ohs-wipes-allinone': {
                id: 'ohs-wipes-allinone',
                name: 'Organic All-in-One Disinfecting Wipes',
                retailPrice: 24.29,
                wholesalePrice: 17.98, // From your pricing table
                wholesaleThreshold: 200, // 200 Units from your table
                type: 'organic',
                emoji: '🧽',
                sku: 'OHS-WIPES-ALLINONE',
                description: 'USDA Certified Organic disinfecting wipes'
            },
            'ohs-equine-gel': {
                id: 'ohs-equine-gel',
                name: '16oz Organic Equine Healing & Udder Gel',
                retailPrice: 38.16,
                wholesalePrice: 30.75, // From your pricing table
                wholesaleThreshold: 50, // 50 Units from your table
                type: 'organic',
                emoji: '🐴',
                sku: 'OHS-EQUINE-GEL',
                description: 'USDA Certified Organic healing gel for animals'
            },
            'ohs-skin-serum': {
                id: 'ohs-skin-serum',
                name: 'Organic Healing Skin Serum',
                retailPrice: 34.63,
                wholesalePrice: 27.89, // From your pricing table
                wholesaleThreshold: 100, // 100 Units from your table
                type: 'organic',
                emoji: '💧',
                sku: 'OHS-SKIN-SERUM',
                description: 'USDA Certified Organic healing serum'
            },
            'ohs-diaper-gel': {
                id: 'ohs-diaper-gel',
                name: '100ml Organic Baby Diaper Rash Gel',
                retailPrice: 35.98,
                wholesalePrice: 28.97, // From your pricing table
                wholesaleThreshold: 100, // 100 Units from your table
                type: 'organic',
                emoji: '👶',
                sku: 'OHS-DIAPER-GEL',
                description: 'USDA Certified Organic baby care gel'
            },
            
            // HYPO COMPANY PREMIUM LINE (Examples based on your margin structure)
            'hc-32oz-cleaner-ready': {
                id: 'hc-32oz-cleaner-ready',
                name: '32oz Multi Use Cleaner Ready to Use - Premium',
                retailPrice: 23.82,
                wholesalePrice: 17.12, // Calculated from your premium margins
                wholesaleThreshold: 300, // Lower threshold for premium line
                type: 'premium',
                emoji: '👑',
                sku: 'HC-32OZ-CLEANER-RTU',
                description: 'EPA registered premium hypochlorous acid cleaner'
            },
            'hc-1gal-ready': {
                id: 'hc-1gal-ready',
                name: '1 Gallon Ready to Use - Premium',
                retailPrice: 45.00,
                wholesalePrice: 32.40, // Premium pricing structure
                wholesaleThreshold: 200, // Premium gallon threshold
                type: 'premium',
                emoji: '🏭',
                sku: 'HC-1GAL-READY-RTU',
                description: 'EPA registered premium bulk solution'
            }
        };

        // ===================================================================
        // CART SYSTEM VARIABLES
        // ===================================================================
        let cartItems = [];
        let isCartSystemReady = false;
        let isWholesaleCustomer = false; // Can be set based on login status

        // ===================================================================
        // WHOLESALE PRICING LOGIC - INDEPENDENT OF CART.JS
        // ===================================================================
        
        function calculateWholesalePricing(productId, quantity) {
            const product = PRODUCT_CATALOG[productId];
            if (!product) {
                console.warn(`Product not found: ${productId}`);
                return { 
                    isWholesale: false, 
                    currentPrice: 0, 
                    savings: 0, 
                    thresholdMet: false,
                    itemsNeeded: 0,
                    retailPrice: 0,
                    wholesalePrice: 0,
                    threshold: 0
                };
            }
            
            const isWholesale = quantity >= product.wholesaleThreshold;
            const currentPrice = isWholesale ? product.wholesalePrice : product.retailPrice;
            const retailTotal = product.retailPrice * quantity;
            const currentTotal = currentPrice * quantity;
            const savings = retailTotal - currentTotal;
            const itemsNeeded = Math.max(0, product.wholesaleThreshold - quantity);
            
            console.log(`Pricing for ${product.name}:`, {
                quantity,
                threshold: product.wholesaleThreshold,
                isWholesale,
                retailPrice: product.retailPrice,
                wholesalePrice: product.wholesalePrice,
                currentPrice,
                itemsNeeded,
                savings
            });
            
            return {
                isWholesale,
                currentPrice,
                savings,
                thresholdMet: isWholesale,
                itemsNeeded,
                threshold: product.wholesaleThreshold,
                retailPrice: product.retailPrice,
                wholesalePrice: product.wholesalePrice
            };
        }
        
        function calculateTotalSavings() {
            let totalRetailPrice = 0;
            let totalCurrentPrice = 0;
            let wholesaleItemsCount = 0;
            
            cartItems.forEach(item => {
                const product = PRODUCT_CATALOG[item.productId];
                if (product) {
                    const pricing = calculateWholesalePricing(item.productId, item.quantity);
                    totalRetailPrice += product.retailPrice * item.quantity;
                    totalCurrentPrice += pricing.currentPrice * item.quantity;
                    if (pricing.isWholesale) {
                        wholesaleItemsCount++;
                    }
                }
            });
            
            const totalSavings = totalRetailPrice - totalCurrentPrice;
            const averageSavingsPercent = totalRetailPrice > 0 ? (totalSavings / totalRetailPrice) * 100 : 0;
            
            return {
                totalSavings,
                averageSavingsPercent,
                wholesaleItemsCount,
                hasSavings: totalSavings > 0
            };
        }
        
        // ===================================================================
        // CORE CART FUNCTIONS
        // ===================================================================
        
        function loadCart() {
            try {
                const stored = localStorage.getItem('ohsCart');
                if (stored) {
                    cartItems = JSON.parse(stored);
                    cartItems = cartItems.map(item => ({
                        productId: item.productId || item.id || `item_${Date.now()}`,
                        name: item.name || 'Unknown Product',
                        price: parseFloat(item.price) || 0,
                        quantity: parseInt(item.quantity) || 1,
                        type: item.type || item.productLine || 'organic',
                        description: item.description || 'Professional hypochlorous acid product',
                        emoji: item.emoji || (item.type === 'premium' ? '👑' : '🌱'),
                        sku: item.sku || '',
                        ...item
                    }));
                } else {
                    cartItems = [];
                }
                
                // Add test items if cart is empty and test mode is on
                if (cartItems.length === 0 && window.location.search.includes('test=true')) {
                    addTestItems();
                }
                
                console.log('✅ Cart loaded:', cartItems.length, 'items');
            } catch (error) {
                console.error('❌ Error loading cart:', error);
                cartItems = [];
            }
            updateDisplay();
            isCartSystemReady = true;
        }
        
        function addTestItems() {
            cartItems = [
                {
                    productId: 'ohs-3oz-disinfectant',
                    name: '3oz Organic Multi-Surface Disinfectant',
                    price: 12.97, // This will be ignored in favor of PRODUCT_CATALOG pricing
                    quantity: 50, // Below 200 threshold - should show "150 more for wholesale"
                    type: 'organic',
                    description: 'Travel-size USDA Certified Organic disinfectant',
                    emoji: '✨',
                    sku: 'OHS-3OZ-DISINFECTANT'
                },
                {
                    productId: 'ohs-wipes-allinone',
                    name: 'Organic All-in-One Disinfecting Wipes',
                    price: 24.29, // This will be ignored in favor of PRODUCT_CATALOG pricing
                    quantity: 250, // Above 200 threshold - should show wholesale pricing ($17.98 vs $24.29)
                    type: 'organic',
                    description: 'USDA Certified Organic disinfecting wipes',
                    emoji: '🧽',
                    sku: 'OHS-WIPES-ALLINONE'
                },
                {
                    productId: 'ohs-skin-serum',
                    name: 'Organic Healing Skin Serum',
                    price: 34.63, // This will be ignored in favor of PRODUCT_CATALOG pricing
                    quantity: 75, // Below 100 threshold - should show "25 more for wholesale"
                    type: 'organic',
                    description: 'USDA Certified Organic healing serum',
                    emoji: '💧',
                    sku: 'OHS-SKIN-SERUM'
                }
            ];
            saveCart();
            console.log('✅ Test items added with wholesale threshold testing data');
            console.log('Expected results:');
            console.log('- 3oz Disinfectant (50/200): Should show "150 more for wholesale" at $12.97 each');
            console.log('- Wipes (250/200): Should show "Wholesale Pricing Active!" at $17.98 each (down from $24.29)');
            console.log('- Skin Serum (75/100): Should show "25 more for wholesale" at $34.63 each');
        }
        
        function saveCart() {
            try {
                localStorage.setItem('ohsCart', JSON.stringify(cartItems));
                console.log('💾 Cart saved successfully');
                window.dispatchEvent(new StorageEvent('storage', {
                    key: 'ohsCart',
                    newValue: JSON.stringify(cartItems)
                }));
            } catch (error) {
                console.error('❌ Error saving cart:', error);
            }
        }
        
        // ===================================================================
        // DISPLAY UPDATE FUNCTIONS
        // ===================================================================
        
        function updateDisplay() {
            updateCartItems();
            updateOrderSummary();
            updateCartBadge();
            updateItemCount();
            updateWholesaleDisplay();
            updateRecommendations();
            updateHeroStats();
            updateSavingsSummary();
        }
        
        function updateCartItems() {
            const container = document.getElementById('cartItems');
            const emptyCart = document.getElementById('emptyCart');
            
            if (!container || !emptyCart) return;
            
            if (cartItems.length === 0) {
                container.style.display = 'none';
                emptyCart.style.display = 'block';
                return;
            }
            
            container.style.display = 'block';
            emptyCart.style.display = 'none';
            
            let html = '';
            cartItems.forEach((item, index) => {
                const product = PRODUCT_CATALOG[item.productId] || {};
                const isOrganic = item.type === 'organic';
                
                // CRITICAL: Use wholesale pricing logic, not item.price
                const pricing = calculateWholesalePricing(item.productId, item.quantity);
                const itemTotal = pricing.currentPrice * item.quantity;
                const retailTotal = pricing.retailPrice * item.quantity;
                
                // Determine if price is large (6+ figures)
                const priceClass = itemTotal >= 100000 ? 'price-display-large' : 'price-display';
                
                console.log(`Rendering item ${index}:`, {
                    name: item.name,
                    quantity: item.quantity,
                    pricing: pricing,
                    itemTotal: itemTotal,
                    retailTotal: retailTotal
                });
                
                html += `
                    <div class="cart-item" data-index="${index}">
                        <div class="row align-items-center">
                            <div class="col-md-2 col-3 mb-3 mb-md-0">
                                <div class="product-image ${isOrganic ? 'organic' : 'premium'}">
                                    ${item.emoji || (isOrganic ? '🌱' : '👑')}
                                </div>
                            </div>
                            <div class="col-md-4 col-9 mb-3 mb-md-0">
                                <h6 class="fw-bold mb-2">${item.name}</h6>
                                <p class="text-muted small mb-2">${item.description}</p>
                                <div class="mb-2">
                                    <span class="badge ${isOrganic ? 'badge-organic' : 'badge-premium'}">
                                        ${isOrganic ? 'USDA Organic' : 'EPA Premium'}
                                    </span>
                                    ${item.sku ? `<span class="badge bg-info ms-1">${item.sku}</span>` : ''}
                                    ${pricing.isWholesale ? `
                                        <div class="mt-1">
                                            <span class="wholesale-pricing-badge">
                                                <i class="fas fa-crown me-1"></i>Wholesale Pricing Active!
                                            </span>
                                        </div>
                                    ` : `
                                        <div class="mt-1">
                                            <span class="wholesale-threshold-indicator">
                                                <i class="fas fa-target me-1"></i>${pricing.itemsNeeded} more for wholesale pricing
                                            </span>
                                        </div>
                                    `}
                                </div>
                            </div>
                            <div class="col-md-3 col-12 mb-3 mb-md-0">
                                <div class="quantity-controls">
                                    <button class="quantity-btn" onclick="changeQuantity(${index}, -1)" 
                                            ${item.quantity <= 1 ? 'disabled' : ''}>
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" class="quantity-input" value="${item.quantity}" 
                                           min="1" max="999" 
                                           onchange="setQuantity(${index}, this.value)"
                                           onclick="this.select()">
                                    <button class="quantity-btn" onclick="changeQuantity(${index}, 1)">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-2 col-6 text-center">
                                <div class="${priceClass}">${pricing.currentPrice.toFixed(2)}</div>
                                <small class="text-muted">each</small>
                                ${pricing.isWholesale ? `
                                    <div class="original-price">${pricing.retailPrice.toFixed(2)}</div>
                                    <div class="discount-amount">Wholesale Price!</div>
                                ` : ''}
                            </div>
                            <div class="col-md-1 col-6 text-center">
                                <div class="${priceClass} mb-2">${itemTotal.toFixed(2)}</div>
                                ${pricing.isWholesale ? `
                                    <div class="original-price">${retailTotal.toFixed(2)}</div>
                                    <div class="discount-amount">-${pricing.savings.toFixed(2)}</div>
                                ` : ''}
                                <button class="btn btn-sm btn-outline-danger mt-2" onclick="removeItem(${index})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            console.log('✅ Cart items updated with proper wholesale pricing logic');
        }
        
        function updateOrderSummary() {
            let retailSubtotal = 0;
            let currentSubtotal = 0;
            let totalWholesaleSavings = 0;
            
            console.log('=== Order Summary Calculation ===');
            
            cartItems.forEach((item, index) => {
                const product = PRODUCT_CATALOG[item.productId];
                if (!product) {
                    console.warn(`Product not found in catalog: ${item.productId}`);
                    // Fallback to item price if product not in catalog
                    const itemTotal = (item.price || 0) * item.quantity;
                    retailSubtotal += itemTotal;
                    currentSubtotal += itemTotal;
                    return;
                }
                
                const pricing = calculateWholesalePricing(item.productId, item.quantity);
                
                const retailItemTotal = product.retailPrice * item.quantity;
                const currentItemTotal = pricing.currentPrice * item.quantity;
                
                retailSubtotal += retailItemTotal;
                currentSubtotal += currentItemTotal;
                
                if (pricing.isWholesale) {
                    totalWholesaleSavings += pricing.savings;
                }
                
                console.log(`Item ${index + 1}: ${item.name}`);
                console.log(`  Retail: ${retailItemTotal.toFixed(2)} | Current: ${currentItemTotal.toFixed(2)} | Savings: ${pricing.savings.toFixed(2)}`);
            });
            
            console.log(`Totals - Retail: ${retailSubtotal.toFixed(2)} | Current: ${currentSubtotal.toFixed(2)} | Wholesale Savings: ${totalWholesaleSavings.toFixed(2)}`);
            
            // Handle subscription discount if enabled
            let subscriptionDiscount = 0;
            const subscriptionToggle = document.getElementById('subscriptionToggle');
            if (subscriptionToggle && subscriptionToggle.checked) {
                const savingsData = calculateTotalSavings();
                // 8% for retail, 10% for wholesale customers
                const discountRate = savingsData.wholesaleItemsCount > 0 ? 0.10 : 0.08;
                subscriptionDiscount = currentSubtotal * discountRate;
            }
            
            const finalSubtotal = currentSubtotal - subscriptionDiscount;
            
            // Update display elements - CRITICAL: Use proper element IDs
            const retailSubtotalEl = document.getElementById('retailSubtotal');
            const subtotalEl = document.getElementById('subtotal');
            const totalEl = document.getElementById('total');
            
            if (retailSubtotalEl) retailSubtotalEl.textContent = '
        
        function updateWholesaleDisplay() {
            const banner = document.getElementById('wholesaleDiscountBanner');
            const bannerText = document.getElementById('wholesaleDiscountText');
            const savingsData = calculateTotalSavings();
            
            if (savingsData.hasSavings && banner && bannerText) {
                banner.style.display = 'block';
                bannerText.textContent = `You're saving $${savingsData.totalSavings.toFixed(2)} with wholesale pricing on ${savingsData.wholesaleItemsCount} items!`;
            } else if (banner) {
                banner.style.display = 'none';
            }
        }
        
        function updateWholesaleProgress() {
            const progressSection = document.getElementById('wholesaleProgressSection');
            const progressContent = document.getElementById('wholesaleProgressContent');
            
            if (!progressSection || !progressContent) return;
            
            // Check if any items are close to wholesale thresholds
            let hasProgress = false;
            let progressHTML = '';
            
            cartItems.forEach(item => {
                const product = PRODUCT_CATALOG[item.productId];
                if (product && item.quantity < product.wholesaleThreshold) {
                    const pricing = calculateWholesalePricing(item.productId, item.quantity);
                    const progress = (item.quantity / product.wholesaleThreshold) * 100;
                    const potentialSavings = (product.retailPrice - product.wholesalePrice) * product.wholesaleThreshold;
                    
                    progressHTML += `
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small><strong>${product.name}</strong></small>
                                <small>${pricing.itemsNeeded} more needed</small>
                            </div>
                            <div class="wholesale-progress-bar">
                                <div class="wholesale-progress-fill" style="width: ${Math.min(progress, 100)}%"></div>
                            </div>
                            <small class="text-muted">
                                ${item.quantity}/${product.wholesaleThreshold} units • 
                                Potential savings: ${potentialSavings.toFixed(2)} when you reach wholesale threshold
                            </small>
                        </div>
                    `;
                    hasProgress = true;
                }
            });
            
            if (hasProgress) {
                progressSection.style.display = 'block';
                progressContent.innerHTML = progressHTML;
            } else {
                progressSection.style.display = 'none';
            }
        }
        
        function updateSavingsSummary() {
            const savingsSummary = document.getElementById('savingsSummary');
            const savingsData = calculateTotalSavings();
            
            if (savingsData.hasSavings && savingsSummary) {
                savingsSummary.style.display = 'block';
                document.getElementById('totalSavingsAmount').textContent = '$' + savingsData.totalSavings.toFixed(2);
                document.getElementById('wholesaleItemsCount').textContent = savingsData.wholesaleItemsCount;
                document.getElementById('averageSavingsPercent').textContent = savingsData.averageSavingsPercent.toFixed(1) + '%';
            } else if (savingsSummary) {
                savingsSummary.style.display = 'none';
            }
        }
        
        function updateCartBadge() {
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            const badge = document.getElementById('cartBadge');
            if (badge) {
                badge.style.display = totalItems > 0 ? 'inline-block' : 'none';
                badge.textContent = totalItems;
            }
        }
        
        function updateItemCount() {
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            const itemCount = document.getElementById('itemCount');
            if (itemCount) {
                itemCount.textContent = totalItems === 1 ? '1 item' : totalItems + ' items';
            }
        }
        
        function updateHeroStats() {
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            let currentSubtotal = 0;
            
            cartItems.forEach(item => {
                const pricing = calculateWholesalePricing(item.productId, item.quantity);
                currentSubtotal += pricing.currentPrice * item.quantity;
            });
            
            const heroTotal = document.getElementById('heroCartTotal');
            const heroCount = document.getElementById('heroItemCount');
            const heroSavingsDisplay = document.getElementById('heroSavingsDisplay');
            const heroTotalSavings = document.getElementById('heroTotalSavings');
            
            if (heroTotal) heroTotal.textContent = '$' + currentSubtotal.toFixed(2);
            if (heroCount) heroCount.textContent = totalItems;
            
            const savingsData = calculateTotalSavings();
            if (savingsData.hasSavings && heroSavingsDisplay && heroTotalSavings) {
                heroSavingsDisplay.style.display = 'block';
                heroTotalSavings.textContent = '$' + savingsData.totalSavings.toFixed(2);
            } else if (heroSavingsDisplay) {
                heroSavingsDisplay.style.display = 'none';
            }
        }
        
        function updateRecommendations() {
            const recommendations = document.getElementById('recommendations');
            
            if (recommendations) {
                recommendations.style.display = cartItems.length > 0 ? 'block' : 'none';
            }
        }
        
        // ===================================================================
        // CART MANAGEMENT FUNCTIONS
        // ===================================================================
        
        function changeQuantity(index, change) {
            if (!cartItems[index]) return;
            
            const newQuantity = cartItems[index].quantity + change;
            
            if (newQuantity <= 0) {
                if (confirm(`Remove "${cartItems[index].name}" from cart?`)) {
                    cartItems.splice(index, 1);
                }
            } else {
                cartItems[index].quantity = newQuantity;
            }
            
            saveCart();
            updateDisplay();
        }
        
        function setQuantity(index, value) {
            if (!cartItems[index]) return;
            
            const newQuantity = Math.max(1, Math.min(999, parseInt(value) || 1));
            cartItems[index].quantity = newQuantity;
            
            saveCart();
            updateDisplay();
        }
        
        function removeItem(index) {
            if (!cartItems[index]) return;
            
            if (confirm(`Remove "${cartItems[index].name}" from cart?`)) {
                cartItems.splice(index, 1);
                saveCart();
                updateDisplay();
            }
        }
        
        function clearAllItems() {
            if (cartItems.length === 0) {
                alert('Your cart is already empty!');
                return;
            }
            
            if (confirm(`Clear all ${cartItems.length} items from cart?`)) {
                cartItems = [];
                saveCart();
                updateDisplay();
            }
        }
        
        // ===================================================================
        // UTILITY FUNCTIONS
        // ===================================================================
        
        function toggleWholesalePricingInfo() {
            const info = document.getElementById('wholesalePricingInfo');
            if (info) {
                info.style.display = info.style.display === 'none' ? 'block' : 'none';
                info.classList.toggle('show');
            }
        }
        
        function applyCoupon() {
            const code = document.getElementById('couponCode')?.value;
            if (!code || !code.trim()) {
                alert('Please enter a coupon code');
                return;
            }
            alert(`Coupon "${code.trim()}" will be applied at Shopify checkout`);
        }
        
        function proceedToCheckout() {
            if (cartItems.length === 0) {
                alert('Your cart is empty! Add some products first.');
                return;
            }
            
            let currentSubtotal = 0;
            cartItems.forEach(item => {
                const pricing = calculateWholesalePricing(item.productId, item.quantity);
                currentSubtotal += pricing.currentPrice * item.quantity;
            });
            
            const checkoutData = {
                items: cartItems,
                subtotal: currentSubtotal,
                savingsData: calculateTotalSavings(),
                timestamp: new Date().toISOString()
            };
            
            try {
                localStorage.setItem('ohsCheckout', JSON.stringify(checkoutData));
                window.location.href = 'checkout.html';
            } catch (error) {
                console.error('❌ Error saving checkout data:', error);
                alert('Error preparing checkout. Please try again.');
            }
        }
        
        // ===================================================================
        // RECOMMENDATION SYSTEM
        // ===================================================================
        
        let recommendationQuantities = { 'rec1': 1, 'rec2': 1 };
        
        function changeRecommendationQuantity(recId, change) {
            const newQuantity = Math.max(1, recommendationQuantities[recId] + change);
            recommendationQuantities[recId] = newQuantity;
            
            const input = document.getElementById(recId + '-qty');
            const minusBtn = document.getElementById(recId + '-minus');
            
            if (input) input.value = newQuantity;
            if (minusBtn) minusBtn.disabled = newQuantity <= 1;
        }
        
        function setRecommendationQuantity(recId, value) {
            const newQuantity = Math.max(1, Math.min(999, parseInt(value) || 1));
            recommendationQuantities[recId] = newQuantity;
            
            const input = document.getElementById(recId + '-qty');
            const minusBtn = document.getElementById(recId + '-minus');
            
            if (input) input.value = newQuantity;
            if (minusBtn) minusBtn.disabled = newQuantity <= 1;
        }
        
        function addRecommendationToCart(recId) {
            const quantity = recommendationQuantities[recId];
            let productData;
            
            if (recId === 'rec1') {
                productData = {
                    productId: 'ohs-32oz-cleaner-ready',
                    name: '32oz Organic Multi-Surface Cleaner',
                    price: 21.80,
                    quantity: quantity,
                    type: 'organic',
                    description: 'Perfect for daily cleaning',
                    emoji: '🧴',
                    sku: 'OHS-32OZ-CLEANER-RTU'
                };
            } else if (recId === 'rec2') {
                productData = {
                    productId: 'ohs-wipes-allinone',
                    name: 'Organic All-in-One Disinfecting Wipes',
                    price: 24.29,
                    quantity: quantity,
                    type: 'organic',
                    description: 'USDA Certified Organic disinfecting wipes',
                    emoji: '🧽',
                    sku: 'OHS-WIPES-ALLINONE'
                };
            }
            
            if (productData) {
                // Check if item already exists
                const existingIndex = cartItems.findIndex(item => item.productId === productData.productId);
                
                if (existingIndex >= 0) {
                    cartItems[existingIndex].quantity += quantity;
                } else {
                    cartItems.push(productData);
                }
                
                saveCart();
                updateDisplay();
                
                // Reset recommendation quantity
                recommendationQuantities[recId] = 1;
                const input = document.getElementById(recId + '-qty');
                const minusBtn = document.getElementById(recId + '-minus');
                if (input) input.value = 1;
                if (minusBtn) minusBtn.disabled = true;
                
                // Show success feedback
                showAddToCartFeedback(productData.name, quantity);
            }
        }
        
        function showAddToCartFeedback(productName, quantity) {
            const notification = document.createElement('div');
            notification.className = 'position-fixed';
            notification.style.cssText = `
                top: 100px; right: 20px; z-index: 9999;
                background: linear-gradient(135deg, var(--ohs-organic-green), var(--ohs-dark-green));
                color: white; padding: 15px 20px; border-radius: 10px;
                box-shadow: 0 8px 25px rgba(74, 222, 128, 0.4);
                font-weight: bold; transform: translateX(400px);
                transition: all 0.3s ease;
            `;
            notification.innerHTML = `
                <div class="d-flex align-items-center">
                    <i class="fas fa-check-circle me-2"></i>
                    <div>
                        <div>Added to Cart!</div>
                        <small>${quantity}x ${productName}</small>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => notification.style.transform = 'translateX(0)', 100);
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }
        
        // ===================================================================
        // SUBSCRIPTION HANDLING
        // ===================================================================
        
        function handleSubscriptionToggle() {
            const toggle = document.getElementById('subscriptionToggle');
            const frequency = document.getElementById('subscriptionFrequency');
            
            if (toggle && frequency) {
                toggle.addEventListener('change', function() {
                    frequency.disabled = !this.checked;
                    updateDisplay();
                });
                
                frequency.addEventListener('change', function() {
                    if (toggle.checked) {
                        updateDisplay();
                    }
                });
            }
        }
        
        // ===================================================================
        // INITIALIZATION
        // ===================================================================
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Cart system initializing with wholesale threshold logic...');
            loadCart();
            handleSubscriptionToggle();
            
            // Add debug functionality if needed
            if (window.location.search.includes('debug=true')) {
                window.debugCart = () => {
                    console.log('Cart items:', cartItems);
                    console.log('Savings breakdown:', calculateTotalSavings());
                    cartItems.forEach(item => {
                        const pricing = calculateWholesalePricing(item.productId, item.quantity);
                        console.log(`${item.name}: Retail ${pricing.retailPrice} | Current ${pricing.currentPrice} | Wholesale: ${pricing.isWholesale} | Savings: ${pricing.savings}`);
                    });
                };
                console.log('Debug mode: Use debugCart() to inspect cart state');
            }
            
            console.log('✅ Cart system ready with wholesale threshold calculations!');
        });
        
        // Listen for storage changes
        window.addEventListener('storage', function(e) {
            if (e.key === 'ohsCart') {
                loadCart();
            }
        });
        
        // Global function exposure
        window.changeQuantity = changeQuantity;
        window.setQuantity = setQuantity;
        window.removeItem = removeItem;
        window.clearAllItems = clearAllItems;
        window.toggleWholesalePricingInfo = toggleWholesalePricingInfo;
        window.applyCoupon = applyCoupon;
        window.proceedToCheckout = proceedToCheckout;
        window.changeRecommendationQuantity = changeRecommendationQuantity;
        window.setRecommendationQuantity = setRecommendationQuantity;
        window.addRecommendationToCart = addRecommendationToCart;
    </script>

    <!-- Recommendation quantity controls styling -->
    <style>
        .recommendation-quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            background: #f8fafc;
            padding: 0.3rem;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }

        .quantity-btn-sm {
            width: 28px;
            height: 28px;
            border: 1px solid var(--ohs-organic-green);
            background: white;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--ohs-organic-green);
            font-weight: bold;
            font-size: 0.8rem;
            user-select: none;
        }

        .quantity-btn-sm:hover:not(:disabled) {
            background: var(--ohs-organic-green);
            color: white;
            transform: scale(1.05);
        }

        .quantity-btn-sm:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #ccc;
            color: #ccc;
        }

        .quantity-input-sm {
            border: 1px solid var(--ohs-organic-green);
            background: white;
            border-radius: 4px;
            width: 45px;
            height: 28px;
            text-align: center;
            font-weight: bold;
            font-size: 0.9rem;
            color: var(--ohs-primary-blue);
            outline: none;
            transition: all 0.3s ease;
        }

        .quantity-input-sm:focus {
            border-color: var(--ohs-primary-blue);
            box-shadow: 0 0 4px rgba(46, 94, 170, 0.3);
        }

        .quantity-input-sm::-webkit-outer-spin-button,
        .quantity-input-sm::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .quantity-input-sm[type=number] {
            -moz-appearance: textfield;
        }
    </style> + retailSubtotal.toFixed(2);
            if (subtotalEl) subtotalEl.textContent = '
        
        function updateWholesaleDisplay() {
            const banner = document.getElementById('wholesaleDiscountBanner');
            const bannerText = document.getElementById('wholesaleDiscountText');
            const savingsData = calculateTotalSavings();
            
            if (savingsData.hasSavings && banner && bannerText) {
                banner.style.display = 'block';
                bannerText.textContent = `You're saving $${savingsData.totalSavings.toFixed(2)} with wholesale pricing on ${savingsData.wholesaleItemsCount} items!`;
            } else if (banner) {
                banner.style.display = 'none';
            }
        }
        
        function updateWholesaleProgress() {
            const progressSection = document.getElementById('wholesaleProgressSection');
            const progressContent = document.getElementById('wholesaleProgressContent');
            
            if (!progressSection || !progressContent) return;
            
            // Check if any items are close to wholesale thresholds
            let hasProgress = false;
            let progressHTML = '';
            
            cartItems.forEach(item => {
                const product = PRODUCT_CATALOG[item.productId];
                if (product && item.quantity < product.wholesaleThreshold) {
                    const pricing = calculateWholesalePricing(item.productId, item.quantity);
                    const progress = (item.quantity / product.wholesaleThreshold) * 100;
                    const potentialSavings = (product.retailPrice - product.wholesalePrice) * product.wholesaleThreshold;
                    
                    progressHTML += `
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-1">
                                <small><strong>${product.name}</strong></small>
                                <small>${pricing.itemsNeeded} more needed</small>
                            </div>
                            <div class="wholesale-progress-bar">
                                <div class="wholesale-progress-fill" style="width: ${Math.min(progress, 100)}%"></div>
                            </div>
                            <small class="text-muted">
                                ${item.quantity}/${product.wholesaleThreshold} units • 
                                Potential savings: ${potentialSavings.toFixed(2)} when you reach wholesale threshold
                            </small>
                        </div>
                    `;
                    hasProgress = true;
                }
            });
            
            if (hasProgress) {
                progressSection.style.display = 'block';
                progressContent.innerHTML = progressHTML;
            } else {
                progressSection.style.display = 'none';
            }
        }
        
        function updateSavingsSummary() {
            const savingsSummary = document.getElementById('savingsSummary');
            const savingsData = calculateTotalSavings();
            
            if (savingsData.hasSavings && savingsSummary) {
                savingsSummary.style.display = 'block';
                document.getElementById('totalSavingsAmount').textContent = '$' + savingsData.totalSavings.toFixed(2);
                document.getElementById('wholesaleItemsCount').textContent = savingsData.wholesaleItemsCount;
                document.getElementById('averageSavingsPercent').textContent = savingsData.averageSavingsPercent.toFixed(1) + '%';
            } else if (savingsSummary) {
                savingsSummary.style.display = 'none';
            }
        }
        
        function updateCartBadge() {
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            const badge = document.getElementById('cartBadge');
            if (badge) {
                badge.style.display = totalItems > 0 ? 'inline-block' : 'none';
                badge.textContent = totalItems;
            }
        }
        
        function updateItemCount() {
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            const itemCount = document.getElementById('itemCount');
            if (itemCount) {
                itemCount.textContent = totalItems === 1 ? '1 item' : totalItems + ' items';
            }
        }
        
        function updateHeroStats() {
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            let currentSubtotal = 0;
            
            cartItems.forEach(item => {
                const pricing = calculateWholesalePricing(item.productId, item.quantity);
                currentSubtotal += pricing.currentPrice * item.quantity;
            });
            
            const heroTotal = document.getElementById('heroCartTotal');
            const heroCount = document.getElementById('heroItemCount');
            const heroSavingsDisplay = document.getElementById('heroSavingsDisplay');
            const heroTotalSavings = document.getElementById('heroTotalSavings');
            
            if (heroTotal) heroTotal.textContent = '$' + currentSubtotal.toFixed(2);
            if (heroCount) heroCount.textContent = totalItems;
            
            const savingsData = calculateTotalSavings();
            if (savingsData.hasSavings && heroSavingsDisplay && heroTotalSavings) {
                heroSavingsDisplay.style.display = 'block';
                heroTotalSavings.textContent = '$' + savingsData.totalSavings.toFixed(2);
            } else if (heroSavingsDisplay) {
                heroSavingsDisplay.style.display = 'none';
            }
        }
        
        function updateRecommendations() {
            const recommendations = document.getElementById('recommendations');
            
            if (recommendations) {
                recommendations.style.display = cartItems.length > 0 ? 'block' : 'none';
            }
        }
        
